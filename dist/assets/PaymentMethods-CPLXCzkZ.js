import{_ as E,u as H,r as p,i as K,c,a as t,d as i,b as f,k as l,v as w,h as M,F as x,n as L,l as G,t as r,e as j,T as Q,j as h,o as d,q as B,x as R,w as A,m as D}from"./index-Mv3MxCR1.js";import{S as _}from"./sweetalert2.esm.all-BQxta0Da.js";import{S as X}from"./search-DW_529iS.js";import{P as N}from"./plus-BF4bXWAK.js";import{C as P}from"./credit-card-o0llABqc.js";import{C as Y}from"./chevron-left-C_DfDUMJ.js";import{C as J}from"./chevron-right-u8dkcCrv.js";import{P as U,T as O}from"./trash-2-CXOSxmzs.js";import{X as W,C as Z}from"./x-D8hPaNXE.js";import"./createLucideIcon-DBeZuCHW.js";const tt={class:"master-data-page wide"},et={class:"header-section"},at={class:"header-actions"},st={class:"search-wrapper"},ot={class:"card table-card"},lt={key:0,class:"loading-state"},nt={key:1,class:"empty-state"},it={class:"empty-icon"},dt={key:2,class:"table-container"},rt={class:"modern-table"},ut={class:"name-column"},pt={class:"font-bold text-dark"},ct={class:"text-xs text-muted"},vt={class:"code-badge"},mt={class:"actions-group"},_t=["onClick"],bt=["onClick"],ft={class:"pagination-footer"},ht={class:"per-page-selector"},gt={class:"pagination-controls"},yt={class:"page-info"},kt={class:"page-buttons"},Ct=["disabled"],wt=["disabled"],Mt={class:"modal-content"},xt={class:"modal-header"},Bt={class:"header-icon"},Tt={class:"header-text"},zt=["disabled"],St={class:"form-grid"},$t={class:"form-group full-width"},At={class:"input-wrapper"},Dt=["disabled"],Nt={class:"form-group full-width"},Pt={class:"status-toggle-group"},Ut=["disabled"],Vt=["disabled"],It={class:"form-group full-width"},Ft={class:"input-wrapper"},qt=["disabled"],Et={class:"modal-footer"},Ht=["disabled"],Kt=["disabled"],Lt={__name:"PaymentMethods",setup(Gt){const T=H(),g=p([]),y=p(!0),n=p(!1),k=p(!1),v=p(null),C=p(""),z=p(null),s=p({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),S=()=>({church_id:T.activeBranch,name:"",description:"",is_active:!0}),o=p(S()),m=async(u=1)=>{y.value=!0;try{const e=await h.get("/payment-methods",{params:{page:u,per_page:s.value.per_page,search:C.value,church_id:T.activeBranch}});g.value=e.data.data,s.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total,from:e.data.from,to:e.data.to}}catch(e){console.error("Fetch error:",e)}finally{y.value=!1}},V=()=>{clearTimeout(z.value),z.value=setTimeout(()=>m(1),500)},$=(u=null)=>{u?(v.value=u.id,o.value={...u}):(v.value=null,o.value=S()),k.value=!0},b=()=>{k.value=!1},I=async()=>{n.value=!0;try{v.value?await h.put(`/payment-methods/${v.value}`,o.value):await h.post("/payment-methods",o.value),_.fire({icon:"success",title:"Berhasil",timer:2e3,showConfirmButton:!1}),m(s.value.current_page),b()}catch{_.fire("Error","Gagal menyimpan data","error")}finally{n.value=!1}},F=async u=>{if((await _.fire({title:"Hapus Metode?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Ya, Hapus"})).isConfirmed)try{await h.delete(`/payment-methods/${u.id}`),m(),_.fire("Terhapus!","Metode telah dihapus.","success")}catch{_.fire("Error","Gagal menghapus data","error")}};return K(()=>{m()}),(u,e)=>(d(),c("div",tt,[t("div",et,[e[13]||(e[13]=t("div",{class:"title-group"},[t("h1",{class:"page-title"},"Metode Pembayaran"),t("p",{class:"page-subtitle"},"Kelola opsi transaksi pembayaran donasi dan persembahan")],-1)),t("div",at,[t("div",st,[i(l(X),{size:"18",class:"search-icon"}),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>C.value=a),type:"text",placeholder:"Cari metode...",class:"search-input",onInput:V},null,544),[[w,C.value]])]),t("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=a=>$())},[i(l(N),{size:"18"}),e[11]||(e[11]=M()),e[12]||(e[12]=t("span",null,"Tambah Metode",-1))])])]),t("div",ot,[y.value?(d(),c("div",lt,[...e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"Memuat data metode...",-1)])])):g.value.length===0?(d(),c("div",nt,[t("div",it,[i(l(P),{size:"48"})]),e[15]||(e[15]=t("p",null,"Tidak ada metode ditemukan.",-1))])):(d(),c("div",dt,[t("table",rt,[e[16]||(e[16]=t("thead",null,[t("tr",null,[t("th",{style:{width:"250px"}},"Nama Metode"),t("th",null,"Kode"),t("th",null,"Status"),t("th",{class:"text-right"},"Aksi")])],-1)),t("tbody",null,[(d(!0),c(x,null,L(g.value,a=>(d(),c("tr",{key:a.id,class:"row-hover"},[t("td",null,[t("div",ut,[t("span",pt,r(a.name),1),t("span",ct,"ID: #"+r(a.id),1)])]),t("td",null,[t("span",vt,r(a.code),1)]),t("td",null,[t("span",{class:B(["status-pill",a.is_active?"active":"inactive"])},r(a.is_active?"Aktif":"Non-Aktif"),3)]),t("td",null,[t("div",mt,[t("button",{class:"action-btn edit",onClick:q=>$(a),title:"Ubah"},[i(l(U),{size:"16"})],8,_t),t("button",{class:"action-btn delete",onClick:q=>F(a),title:"Hapus"},[i(l(O),{size:"16"})],8,bt)])])]))),128))])]),t("div",ft,[t("div",ht,[e[18]||(e[18]=t("span",null,"TAMPILKAN",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.per_page=a),onChange:e[3]||(e[3]=a=>m(1))},[...e[17]||(e[17]=[t("option",{value:10},"10 data",-1),t("option",{value:25},"25 data",-1),t("option",{value:50},"50 data",-1)])],544),[[G,s.value.per_page]])]),t("div",gt,[t("span",yt,[t("b",null,r(s.value.from||0)+"-"+r(s.value.to||0),1),e[19]||(e[19]=M(" dari ",-1)),t("b",null,r(s.value.total),1)]),t("div",kt,[t("button",{class:"page-btn",disabled:s.value.current_page===1,onClick:e[4]||(e[4]=a=>m(s.value.current_page-1))},[i(l(Y),{size:"18"})],8,Ct),t("button",{class:"page-btn",disabled:s.value.current_page===s.value.last_page,onClick:e[5]||(e[5]=a=>m(s.value.current_page+1))},[i(l(J),{size:"18"})],8,wt)])])])]))]),i(Q,{name:"modal-fade"},{default:j(()=>[k.value?(d(),c("div",{key:0,class:"modal-overlay",onClick:e[10]||(e[10]=A(a=>!n.value&&b(),["self"]))},[t("div",Mt,[t("div",xt,[t("div",Bt,[v.value?(d(),D(l(U),{key:1,size:"24"})):(d(),D(l(N),{key:0,size:"24"}))]),t("div",Tt,[t("h2",null,r(v.value?"Update Metode":"Tambah Metode Baru"),1),t("p",null,r(v.value?"Ubah informasi metode pembayaran":"Pilih dan atur cara transaksi finansial di bawah ini"),1)]),t("button",{class:"close-btn",onClick:b,disabled:n.value},[i(l(W),{size:"20"})],8,zt)]),t("form",{onSubmit:A(I,["prevent"]),class:"modal-body"},[t("div",St,[t("div",$t,[e[20]||(e[20]=t("label",{class:"form-label"},[M("Nama Metode "),t("span",{class:"required"},"*")],-1)),t("div",At,[i(l(P),{size:"18",class:"input-icon"}),f(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.name=a),type:"text",required:"",placeholder:"Contoh: Transfer Bank BCA",disabled:n.value},null,8,Dt),[[w,o.value.name]])])]),t("div",Nt,[e[21]||(e[21]=t("label",{class:"form-label"},"Status Metode",-1)),t("div",Pt,[t("button",{type:"button",class:B(["status-btn",{active:o.value.is_active}]),onClick:e[7]||(e[7]=a=>o.value.is_active=!0),disabled:n.value},"Aktif",10,Ut),t("button",{type:"button",class:B(["status-btn",{active:!o.value.is_active}]),onClick:e[8]||(e[8]=a=>o.value.is_active=!1),disabled:n.value},"Non-Aktif",10,Vt)])]),t("div",It,[e[22]||(e[22]=t("label",{class:"form-label"},"Deskripsi / Catatan",-1)),t("div",Ft,[f(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.description=a),rows:"3",placeholder:"Informasi tambahan mengenai metode ini...",disabled:n.value},null,8,qt),[[w,o.value.description]])])])]),t("div",Et,[t("button",{type:"button",class:"btn btn-ghost",onClick:b,disabled:n.value},"Batal",8,Ht),t("button",{type:"submit",class:"btn btn-primary",disabled:n.value},[n.value?(d(),c(x,{key:0},[e[23]||(e[23]=t("div",{class:"spinner small"},null,-1)),e[24]||(e[24]=t("span",null,"Menyimpan...",-1))],64)):(d(),c(x,{key:1},[i(l(Z),{size:"18"}),t("span",null,r(v.value?"Update Data":"Simpan Metode"),1)],64))],8,Kt)])],32)])])):R("",!0)]),_:1})]))}},ee=E(Lt,[["__scopeId","data-v-df2826a9"]]);export{ee as default};
