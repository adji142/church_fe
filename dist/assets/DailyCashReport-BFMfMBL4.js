import{_ as z,u as K,r as u,i as M,c as n,a as s,d as r,h as R,q as y,k as d,b as v,v as F,l as f,F as x,n as g,t as a,j as b,o as l,x as S}from"./index-Mv3MxCR1.js";import{R as V}from"./refresh-ccw-CKToBt2C.js";import{C as B}from"./calendar-COvuOzBD.js";import{M as I}from"./map-pin-DIz-n_0r.js";import{A as N}from"./arrow-up-down-Cbps0Qas.js";import{B as U}from"./briefcase-DeOdw5oH.js";import{a as A,C as L}from"./circle-arrow-up-Birpf_H5.js";import{W as J}from"./wallet-C2xPgWki.js";import{F as j}from"./file-text-CPaFxqa6.js";import"./createLucideIcon-DBeZuCHW.js";const E={class:"master-data-page wide"},H={class:"header-section"},O={class:"header-actions"},P={class:"card filter-card report-section-gap"},W={class:"p-6"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end"},G={class:"filter-item"},Q={class:"input-wrapper-report"},X={class:"filter-item"},Y={class:"input-wrapper-report"},Z=["value"],$={class:"filter-item"},ss={class:"input-wrapper-report"},ts={class:"filter-item"},es={class:"input-wrapper-report"},as=["value"],os={class:"summary-container report-section-gap"},ns={class:"summary-card income animate-slide-up",style:{"animation-delay":"0.1s"}},ls={class:"summary-icon bg-emerald-100 text-emerald-600"},is={class:"summary-content"},rs={class:"summary-value text-emerald-600"},ds={class:"summary-card expense animate-slide-up",style:{"animation-delay":"0.2s"}},cs={class:"summary-icon bg-rose-100 text-rose-600"},us={class:"summary-content"},ps={class:"summary-value text-rose-600"},ms={class:"summary-card balance animate-slide-up",style:{"animation-delay":"0.3s"}},_s={class:"summary-icon bg-indigo-100 text-indigo-600"},vs={class:"summary-content"},hs={class:"summary-value text-indigo-600"},ys={class:"card table-card shadow-sm border-slate-200"},fs={key:0,class:"loading-state h-64"},xs={key:1,class:"empty-state h-64"},gs={class:"empty-icon"},bs={key:2,class:"table-container shadow-none"},ws={class:"modern-table border-none"},ks={class:"font-medium text-slate-600"},Ds={class:"flex flex-col"},Cs={class:"font-bold text-slate-800"},Ts={class:"text-[10px] text-slate-400 font-mono"},zs={class:"flex flex-col"},Ks={class:"font-semibold text-sm text-slate-700"},Ms={key:0,class:"text-[10px] font-bold text-amber-600 uppercase"},Rs=["title"],Fs={class:"text-right"},Ss={class:"text-right"},Vs={class:"flex flex-col items-end"},Bs={class:"text-[10px] font-bold text-slate-500 uppercase"},Is={class:"text-[9px] text-slate-300"},Ns={__name:"DailyCashReport",setup(Us){const D=K(),p=u(!0),h=u([]),m=u({total_income:0,total_expense:0,balance:0}),i=u({date:new Date().toISOString().split("T")[0],church_id:D.activeBranch,type:"",fund_id:null}),w=u([]),k=u([]),C=async()=>{try{const[o,t]=await Promise.all([b.get("/branches",{params:{per_page:999}}),b.get("/funds",{params:{per_page:999}})]);w.value=o.data.data,k.value=t.data.data}catch(o){console.error("Failed to fetch filter options",o)}},c=async()=>{p.value=!0;try{const o=await b.get("/reports/cash-daily",{params:i.value});h.value=o.data.data,m.value=o.data.summary}catch(o){console.error("Failed to fetch report",o)}finally{p.value=!1}},T=o=>o?new Date(o).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"-",_=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o);return M(()=>{C(),c()}),(o,t)=>(l(),n("div",E,[s("div",H,[t[6]||(t[6]=s("div",{class:"title-group"},[s("h1",{class:"page-title"},"Laporan Kas Harian"),s("p",{class:"page-subtitle"},"Kontrol uang harian & transparansi finansial gereja")],-1)),s("div",O,[s("button",{class:"btn btn-primary",onClick:c},[r(d(V),{size:"18",class:y({"animate-spin":p.value})},null,8,["class"]),t[4]||(t[4]=R()),t[5]||(t[5]=s("span",null,"Refresh Laporan",-1))])])]),s("div",P,[s("div",W,[s("div",q,[s("div",G,[t[7]||(t[7]=s("span",{class:"filter-label"},"Tanggal",-1)),s("div",Q,[r(d(B),{size:"16",class:"input-icon"}),v(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.date=e),type:"date",onChange:c,class:"report-input"},null,544),[[F,i.value.date]])])]),s("div",X,[t[9]||(t[9]=s("span",{class:"filter-label"},"Cabang / Branch",-1)),s("div",Y,[r(d(I),{size:"16",class:"input-icon"}),v(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.church_id=e),onChange:c,class:"report-select"},[t[8]||(t[8]=s("option",{value:null},"Semua Cabang",-1)),(l(!0),n(x,null,g(w.value,e=>(l(),n("option",{key:e.id,value:e.id},a(e.name),9,Z))),128))],544),[[f,i.value.church_id]])])]),s("div",$,[t[11]||(t[11]=s("span",{class:"filter-label"},"Jenis Transaksi",-1)),s("div",ss,[r(d(N),{size:"16",class:"input-icon"}),v(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.type=e),onChange:c,class:"report-select"},[...t[10]||(t[10]=[s("option",{value:""},"Semua Transaksi",-1),s("option",{value:"income"},"Masuk (Income)",-1),s("option",{value:"expense"},"Keluar (Expense)",-1)])],544),[[f,i.value.type]])])]),s("div",ts,[t[13]||(t[13]=s("span",{class:"filter-label"},"Jenis Dana (Fund)",-1)),s("div",es,[r(d(U),{size:"16",class:"input-icon"}),v(s("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.fund_id=e),onChange:c,class:"report-select"},[t[12]||(t[12]=s("option",{value:null},"Semua Dana",-1)),(l(!0),n(x,null,g(k.value,e=>(l(),n("option",{key:e.id,value:e.id},a(e.name),9,as))),128))],544),[[f,i.value.fund_id]])])])])])]),s("div",os,[s("div",ns,[s("div",ls,[r(d(A),{size:"24"})]),s("div",is,[t[14]||(t[14]=s("span",{class:"summary-label"},"Total Kas Masuk",-1)),s("h2",rs,a(_(m.value.total_income)),1)])]),s("div",ds,[s("div",cs,[r(d(L),{size:"24"})]),s("div",us,[t[15]||(t[15]=s("span",{class:"summary-label"},"Total Kas Keluar",-1)),s("h2",ps,a(_(m.value.total_expense)),1)])]),s("div",ms,[s("div",_s,[r(d(J),{size:"24"})]),s("div",vs,[t[16]||(t[16]=s("span",{class:"summary-label"},"Saldo Harian",-1)),s("h2",hs,a(_(m.value.balance)),1)])])]),s("div",ys,[p.value?(l(),n("div",fs,[...t[17]||(t[17]=[s("div",{class:"spinner"},null,-1),s("p",null,"Menghasilkan laporan...",-1)])])):h.value.length===0?(l(),n("div",xs,[s("div",gs,[r(d(j),{size:"48"})]),t[18]||(t[18]=s("p",null,"Tidak ada transaksi pada kriteria ini.",-1))])):(l(),n("div",bs,[s("table",ws,[t[19]||(t[19]=s("thead",{class:"bg-slate-50/50"},[s("tr",null,[s("th",{style:{width:"150px"}},"Tanggal"),s("th",{style:{width:"180px"}},"No Transaksi / Ref"),s("th",{style:{width:"120px"}},"Jenis"),s("th",null,"Kategori Kas & Dana"),s("th",null,"Keterangan"),s("th",{class:"text-right",style:{width:"180px"}},"Total Nominal"),s("th",{class:"text-right",style:{width:"150px"}},"Dibuat Oleh")])],-1)),s("tbody",null,[(l(!0),n(x,null,g(h.value,e=>(l(),n("tr",{key:e.id,class:"row-hover border-b border-slate-100 last:border-0"},[s("td",ks,a(T(e.transaction_date)),1),s("td",null,[s("div",Ds,[s("span",Cs,"#"+a(e.id),1),s("span",Ts,a(e.reference_number||"-"),1)])]),s("td",null,[s("span",{class:y(["status-pill",e.type==="income"?"active":"inactive"])},a(e.type==="income"?"Masuk":"Keluar"),3)]),s("td",null,[s("div",zs,[s("span",Ks,a(e.cash_category?.name),1),e.fund?(l(),n("span",Ms,a(e.fund?.name),1)):S("",!0)])]),s("td",null,[s("p",{class:"text-xs text-slate-500 max-w-[250px] truncate",title:e.description},a(e.description||"-"),9,Rs)]),s("td",Fs,[s("span",{class:y(["font-black text-sm",e.type==="income"?"text-emerald-600":"text-rose-600"])},a(_(e.total_amount)),3)]),s("td",Ss,[s("div",Vs,[s("span",Bs,a(e.creator?.name),1),s("span",Is,a(e.church?.name),1)])])]))),128))])])]))])]))}},Gs=z(Ns,[["__scopeId","data-v-a248c3c6"]]);export{Gs as default};
