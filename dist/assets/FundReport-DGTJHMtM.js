import{_ as z,u as B,r as c,i as T,c as l,a as t,d,h as V,q as I,k as u,b as m,v as w,l as k,F as f,n as g,j as x,o,t as r}from"./index-Mv3MxCR1.js";import{R as N}from"./refresh-ccw-CKToBt2C.js";import{C as D}from"./calendar-COvuOzBD.js";import{B as P}from"./briefcase-DeOdw5oH.js";import{M as U}from"./map-pin-DIz-n_0r.js";import{F as A}from"./file-text-CPaFxqa6.js";import"./createLucideIcon-DBeZuCHW.js";const L={class:"master-data-page wide"},j={class:"header-section"},O={class:"header-actions"},Y={class:"card filter-card report-section-gap"},q={class:"p-6"},E={class:"flex flex-wrap items-end gap-6"},K={class:"filter-item flex-1 min-w-[300px]"},G={class:"flex items-center gap-2"},H={class:"input-wrapper-report flex-1"},J={class:"input-wrapper-report flex-1"},Q={class:"p-6"},W={class:"filter-item min-w-[200px]"},X={class:"input-wrapper-report"},Z=["value"],$={class:"filter-item min-w-[200px]"},tt={class:"input-wrapper-report"},et=["value"],st={class:"card table-card shadow-sm border-slate-200"},at={key:0,class:"loading-state h-64"},nt={key:1,class:"empty-state h-64"},lt={class:"empty-icon"},ot={key:2,class:"table-container shadow-none"},rt={class:"modern-table border-none"},it={class:"font-bold text-slate-700"},dt={class:"text-right font-semibold text-slate-600"},ut={class:"text-right font-bold text-emerald-600"},ct={class:"text-right font-bold text-rose-600"},pt={class:"text-right font-black text-indigo-600"},vt={__name:"FundReport",setup(ht){const F=B(),p=c(!0),_=c([]),v=new Date,C=new Date(v.getFullYear(),v.getMonth(),1).toISOString().split("T")[0],M=new Date(v.getFullYear(),v.getMonth()+1,0).toISOString().split("T")[0],a=c({start_date:C,end_date:M,fund_id:null,church_id:F.activeBranch}),b=c([]),y=c([]),S=async()=>{try{const[n,e]=await Promise.all([x.get("/branches",{params:{per_page:999}}),x.get("/funds",{params:{per_page:999}})]);b.value=n.data.data,y.value=e.data.data,i()}catch(n){console.error("Failed to fetch filter options",n)}},i=async()=>{if(!(!a.value.start_date||!a.value.end_date)){p.value=!0;try{const n=await x.get("/reports/cash-fund",{params:a.value});_.value=n.data.data}catch(n){console.error("Failed to fetch report",n)}finally{p.value=!1}}},h=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n);return T(()=>{S()}),(n,e)=>(o(),l("div",L,[t("div",j,[e[6]||(e[6]=t("div",{class:"title-group"},[t("h1",{class:"page-title"},"Laporan Dana (Fund Report)"),t("p",{class:"page-subtitle"},"Mengetahui rincian saldo awal, mutasi, dan saldo akhir tiap jenis dana")],-1)),t("div",O,[t("button",{class:"btn btn-primary",onClick:i},[d(u(N),{size:"18",class:I({"animate-spin":p.value})},null,8,["class"]),e[4]||(e[4]=V()),e[5]||(e[5]=t("span",null,"Refresh Laporan",-1))])])]),t("div",Y,[t("div",q,[t("div",E,[t("div",K,[e[8]||(e[8]=t("span",{class:"filter-label"},"Periode Tanggal",-1)),t("div",G,[t("div",H,[d(u(D),{size:"16",class:"input-icon"}),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.start_date=s),type:"date",onChange:i,class:"report-input"},null,544),[[w,a.value.start_date]])]),e[7]||(e[7]=t("span",{class:"text-slate-400 font-bold"},"s/d",-1)),t("div",J,[d(u(D),{size:"16",class:"input-icon"}),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.end_date=s),type:"date",onChange:i,class:"report-input"},null,544),[[w,a.value.end_date]])])])])])]),t("div",Q,[t("div",W,[e[10]||(e[10]=t("span",{class:"filter-label"},"Dana (Found)",-1)),t("div",X,[d(u(P),{size:"16",class:"input-icon"}),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.fund_id=s),onChange:i,class:"report-select"},[e[9]||(e[9]=t("option",{value:null},"Semua Dana",-1)),(o(!0),l(f,null,g(y.value,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,Z))),128))],544),[[k,a.value.fund_id]])])]),t("div",$,[e[12]||(e[12]=t("span",{class:"filter-label"},"Cabang / Branch",-1)),t("div",tt,[d(u(U),{size:"16",class:"input-icon"}),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.church_id=s),onChange:i,class:"report-select"},[e[11]||(e[11]=t("option",{value:null},"Semua Cabang",-1)),(o(!0),l(f,null,g(b.value,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,et))),128))],544),[[k,a.value.church_id]])])])])]),t("div",st,[p.value?(o(),l("div",at,[...e[13]||(e[13]=[t("div",{class:"spinner"},null,-1),t("p",null,"Menghasilkan laporan dana...",-1)])])):_.value.length===0?(o(),l("div",nt,[t("div",lt,[d(u(A),{size:"48"})]),e[14]||(e[14]=t("p",null,"Tidak ada data ditemukan. Pastikan Periode telah dipilih.",-1))])):(o(),l("div",ot,[t("table",rt,[e[15]||(e[15]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",null,"Nama Dana"),t("th",{class:"text-right"},"Saldo Awal"),t("th",{class:"text-right text-emerald-600"},"Masuk"),t("th",{class:"text-right text-rose-600"},"Keluar"),t("th",{class:"text-right"},"Saldo Akhir")])],-1)),t("tbody",null,[(o(!0),l(f,null,g(_.value,(s,R)=>(o(),l("tr",{key:R,class:"row-hover border-b border-slate-100 last:border-0"},[t("td",it,r(s.fund_name),1),t("td",dt,r(h(s.opening_balance)),1),t("td",ut," + "+r(h(s.income)),1),t("td",ct," - "+r(h(s.expense)),1),t("td",pt,r(h(s.closing_balance)),1)]))),128))])])]))])]))}},wt=z(vt,[["__scopeId","data-v-9343c069"]]);export{wt as default};
