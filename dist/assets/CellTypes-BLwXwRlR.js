import{_ as E,u as G,r as p,A as I,i as K,c as r,a as e,d as u,b,k as i,v as f,h as S,F as T,n as F,l as L,t as c,e as Y,T as H,j as y,o,x as R,w as U,m as z}from"./index-Mv3MxCR1.js";import{S as m}from"./sweetalert2.esm.all-BQxta0Da.js";import{S as $}from"./search-DW_529iS.js";import{P as J}from"./plus-BF4bXWAK.js";import{C as q}from"./chevron-left-C_DfDUMJ.js";import{C as Q}from"./chevron-right-u8dkcCrv.js";import{P as V,T as X}from"./trash-2-CXOSxmzs.js";import{X as O,C as W}from"./x-D8hPaNXE.js";import{T as Z}from"./type-zrf9LQ7g.js";import"./createLucideIcon-DBeZuCHW.js";const ee={class:"master-data-page"},ae={class:"header-section"},te={class:"header-actions"},se={class:"search-wrapper"},le=["disabled"],ne=["disabled"],oe={class:"card table-card"},ie={key:0,class:"loading-state"},de={key:1,class:"empty-state"},re={class:"empty-icon"},ue={key:2,class:"table-container"},ce={class:"modern-table"},pe={class:"order-badge"},ve={class:"font-bold text-dark"},_e={key:0,class:"age-badge"},me={key:1,class:"text-muted"},be={class:"actions-group"},ge=["onClick","disabled"],he=["onClick","disabled"],fe={class:"pagination-footer"},ye={class:"per-page-selector"},ke=["disabled"],Ce={class:"pagination-controls"},xe={class:"page-info"},we={class:"page-buttons"},Te=["disabled"],Be=["disabled"],Me={class:"modal-content"},Se={class:"modal-header"},Ue={class:"header-icon"},ze={class:"header-text"},$e=["disabled"],Je={class:"form-section"},Ve={class:"form-group full-width"},De={class:"input-wrapper"},Ne=["disabled"],je={class:"flex gap-4 mt-4"},Ae={class:"form-group flex-1"},Pe={class:"input-wrapper"},Ee=["disabled"],Ge={class:"form-group flex-1"},Ie={class:"input-wrapper"},Ke=["disabled"],Fe={class:"modal-footer"},Le=["disabled"],Ye=["disabled"],He={__name:"CellTypes",setup(Re){const g=G(),k=p([]),C=p(!0),s=p(!1),x=p(!1),v=p(null),w=p(""),B=p(null),l=p({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),d=p({name:"",start_age:null,end_age:null,branch_id:null}),_=async(n=1)=>{if(g.activeBranch){C.value=!0;try{const a=await y.get("/cell-types",{params:{branch_id:g.activeBranch.id,page:n,per_page:l.value.per_page,search:w.value}});k.value=a.data.data,l.value={current_page:a.data.current_page,last_page:a.data.last_page,per_page:a.data.per_page,total:a.data.total,from:a.data.from,to:a.data.to}}catch(a){console.error("Failed to fetch cell types",a),m.fire("Error","Gagal memuat data jenis cell.","error")}finally{C.value=!1}}},D=()=>{clearTimeout(B.value),B.value=setTimeout(()=>{_(1)},500)};I(()=>g.activeBranch,n=>{n&&_(1)},{immediate:!0}),K(()=>{_()});const M=(n=null)=>{n?(v.value=n.id,d.value={name:n.name,start_age:n.start_age,end_age:n.end_age,branch_id:n.branch_id}):(v.value=null,d.value={name:"",start_age:null,end_age:null,branch_id:g.activeBranch?.id}),x.value=!0},h=()=>{x.value=!1},N=async()=>{if(!d.value.branch_id){m.fire("Error","Silakan pilih cabang terlebih dahulu.","error");return}s.value=!0;try{v.value?await y.put(`/cell-types/${v.value}`,d.value):await y.post("/cell-types",d.value),await _(l.value.current_page),h(),m.fire({icon:"success",title:"Berhasil!",text:"Data jenis cell telah diperbarui.",timer:2e3,showConfirmButton:!1})}catch{m.fire("Error","Gagal menyimpan data.","error")}finally{s.value=!1}},j=async n=>{if((await m.fire({title:"Apakah Anda yakin?",text:`Jenis cell "${n.name}" akan dihapus permanen!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{await y.delete(`/cell-types/${n.id}`),await _(l.value.current_page),m.fire("Dihapus!","Data telah berhasil dihapus.","success")}catch{m.fire("Error","Gagal menghapus data.","error")}};return(n,a)=>(o(),r("div",ee,[e("div",ae,[a[12]||(a[12]=e("div",{class:"title-group"},[e("h1",{class:"page-title"},"Master Jenis Cell"),e("p",{class:"page-subtitle"},"Kelola kategori jenis cell (contoh: Youth, Kids, General)")],-1)),e("div",te,[e("div",se,[u(i($),{size:"18",class:"search-icon"}),b(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),type:"text",placeholder:"Cari jenis cell...",class:"search-input",onInput:D,disabled:s.value},null,40,le),[[f,w.value]])]),e("button",{class:"btn btn-primary",onClick:a[1]||(a[1]=t=>M()),disabled:s.value},[u(i(J),{size:"18"}),a[10]||(a[10]=S()),a[11]||(a[11]=e("span",null,"Tambah Jenis",-1))],8,ne)])]),e("div",oe,[C.value?(o(),r("div",ie,[...a[13]||(a[13]=[e("div",{class:"spinner"},null,-1),e("p",null,"Memuat data...",-1)])])):k.value.length===0?(o(),r("div",de,[e("div",re,[u(i($),{size:"48"})]),a[14]||(a[14]=e("p",null,"Tidak ada data yang ditemukan.",-1))])):(o(),r("div",ue,[e("table",ce,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",{style:{width:"80px"}},"No"),e("th",null,"Nama Jenis"),e("th",null,"Rentang Usia"),e("th",{class:"text-right"},"Aksi")])],-1)),e("tbody",null,[(o(!0),r(T,null,F(k.value,(t,A)=>(o(),r("tr",{key:t.id,class:"row-hover"},[e("td",null,[e("span",pe,c(l.value.from+A),1)]),e("td",ve,c(t.name),1),e("td",null,[t.start_age||t.end_age?(o(),r("span",_e,c(t.start_age||0)+" - "+c(t.end_age||"âˆž")+" Tahun ",1)):(o(),r("span",me,"Semua Usia"))]),e("td",null,[e("div",be,[e("button",{class:"action-btn edit",onClick:P=>M(t),title:"Ubah",disabled:s.value},[u(i(V),{size:"16"})],8,ge),e("button",{class:"action-btn delete",onClick:P=>j(t),title:"Hapus",disabled:s.value},[u(i(X),{size:"16"})],8,he)])])]))),128))])]),e("div",fe,[e("div",ye,[a[17]||(a[17]=e("span",{class:"text-xs font-bold text-muted"},"TAMPILKAN",-1)),b(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.per_page=t),onChange:a[3]||(a[3]=t=>_(1)),disabled:s.value},[...a[16]||(a[16]=[e("option",{value:10},"10 data",-1),e("option",{value:25},"25 data",-1),e("option",{value:50},"50 data",-1),e("option",{value:100},"100 data",-1)])],40,ke),[[L,l.value.per_page]])]),e("div",Ce,[e("span",xe,[e("b",null,c(l.value.from||0)+"-"+c(l.value.to||0),1),a[18]||(a[18]=S(" dari ",-1)),e("b",null,c(l.value.total),1)]),e("div",we,[e("button",{class:"page-btn",disabled:l.value.current_page===1||s.value,onClick:a[4]||(a[4]=t=>_(l.value.current_page-1))},[u(i(q),{size:"18"})],8,Te),e("button",{class:"page-btn",disabled:l.value.current_page===l.value.last_page||s.value,onClick:a[5]||(a[5]=t=>_(l.value.current_page+1))},[u(i(Q),{size:"18"})],8,Be)])])])]))]),u(H,{name:"modal-fade"},{default:Y(()=>[x.value?(o(),r("div",{key:0,class:"modal-overlay",onClick:a[9]||(a[9]=U(t=>!s.value&&h(),["self"]))},[e("div",Me,[e("div",Se,[e("div",Ue,[v.value?(o(),z(i(V),{key:1,size:"24"})):(o(),z(i(J),{key:0,size:"24"}))]),e("div",ze,[e("h2",null,c(v.value?"Update Jenis Cell":"Tambah Jenis Cell Baru"),1),e("p",null,c(v.value?"Ubah informasi jenis cell yang sudah ada":"Masukkan informasi kategori jenis cell baru"),1)]),e("button",{class:"close-btn",onClick:h,disabled:s.value},[u(i(O),{size:"20"})],8,$e)]),e("form",{onSubmit:U(N,["prevent"]),class:"modal-body"},[e("div",Je,[e("div",Ve,[a[19]||(a[19]=e("label",{class:"form-label"},"Nama Jenis Cell",-1)),e("div",De,[u(i(Z),{size:"18",class:"input-icon"}),b(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>d.value.name=t),type:"text",required:"",placeholder:"Contoh: Youth, Professional, Kids",disabled:s.value},null,8,Ne),[[f,d.value.name]])])]),e("div",je,[e("div",Ae,[a[20]||(a[20]=e("label",{class:"form-label"},"Usia Mulai",-1)),e("div",Pe,[b(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>d.value.start_age=t),type:"number",placeholder:"0",disabled:s.value},null,8,Ee),[[f,d.value.start_age,void 0,{number:!0}]])])]),e("div",Ge,[a[21]||(a[21]=e("label",{class:"form-label"},"Usia Selesai",-1)),e("div",Ie,[b(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>d.value.end_age=t),type:"number",placeholder:"99",disabled:s.value},null,8,Ke),[[f,d.value.end_age,void 0,{number:!0}]])])])])]),e("div",Fe,[e("button",{type:"button",class:"btn btn-ghost",onClick:h,disabled:s.value},"Batal",8,Le),e("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:s.value},[s.value?(o(),r(T,{key:0},[a[22]||(a[22]=e("div",{class:"spinner small"},null,-1)),a[23]||(a[23]=e("span",null,"Menyimpan...",-1))],64)):(o(),r(T,{key:1},[u(i(W),{size:"18"}),e("span",null,c(v.value?"Update Jenis":"Simpan Jenis"),1)],64))],8,Ye)])],32)])])):R("",!0)]),_:1})]))}},la=E(He,[["__scopeId","data-v-818213cd"]]);export{la as default};
