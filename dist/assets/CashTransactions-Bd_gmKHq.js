import{_ as ct,u as mt,r as c,z as $,A as vt,i as _t,c as o,a as t,d,b as p,k as r,v as g,h as b,q as x,l as B,F as f,n as h,t as i,e as bt,T as ft,j as y,o as l,x as k,w as Z,m as gt,s as ht,p as F}from"./index-Mv3MxCR1.js";import{S as M}from"./sweetalert2.esm.all-BQxta0Da.js";import{L as xt,B as tt}from"./list-DqXgzvel.js";import{L as yt}from"./layers-ChaLHLIF.js";import{F as kt}from"./file-text-CPaFxqa6.js";import{S as Ct}from"./search-DW_529iS.js";import{P as E}from"./plus-BF4bXWAK.js";import{C as wt}from"./chevron-left-C_DfDUMJ.js";import{C as Tt}from"./chevron-right-u8dkcCrv.js";import{P as Ut,T as j}from"./trash-2-CXOSxmzs.js";import{X as Dt,C as At}from"./x-D8hPaNXE.js";import{a as zt,C as It}from"./circle-arrow-up-Birpf_H5.js";import{C as Vt}from"./calendar-COvuOzBD.js";import{T as Bt}from"./tag-Dx8Wwxbt.js";import{C as Mt}from"./credit-card-o0llABqc.js";import{B as Pt}from"./briefcase-DeOdw5oH.js";import{H as St}from"./hash-3C7pK2I6.js";import{C as H}from"./circle-alert-BaaFyc9X.js";import{I as et}from"./info-DU3L2ZR8.js";import"./createLucideIcon-DBeZuCHW.js";const $t={class:"master-data-page wide"},Kt={class:"header-section"},Nt={class:"header-actions"},Rt={class:"search-wrapper"},Lt={class:"card filter-card mb-8"},qt={class:"p-6"},Ft={class:"flex items-center justify-between"},Et={class:"flex items-center gap-8"},jt={class:"filter-item"},Ht={class:"filter-pills"},Ot={class:"filter-item"},Gt=["value"],Jt={class:"text-right"},Qt={class:"text-xl font-black text-indigo-600"},Xt={class:"card table-card"},Yt={key:0,class:"loading-state"},Wt={key:1,class:"empty-state"},Zt={class:"empty-icon"},te={key:2,class:"table-container"},ee={class:"modern-table"},ae={class:"name-column"},se={class:"font-bold text-dark"},ne={class:"text-xs text-muted"},le={class:"flex flex-col max-w-[300px]"},oe=["title"],ie={class:"flex items-center gap-1.5 mt-0.5"},de={class:"type-tag"},re={key:0,class:"code-badge text-[10px]"},ue={class:"flex flex-col"},pe={class:"text-xs font-semibold text-slate-600"},ce={key:0,class:"text-[10px] text-amber-600 font-bold"},me={class:"text-right"},ve={class:"text-right"},_e={class:"text-[10px] font-bold text-muted uppercase"},be={class:"actions-group"},fe=["onClick"],ge=["onClick"],he={class:"pagination-footer"},xe={class:"per-page-selector"},ye={class:"pagination-controls"},ke={class:"page-info"},Ce={class:"page-buttons"},we=["disabled"],Te=["disabled"],Ue={class:"modal-content extra-large h-[90vh]"},De={class:"modal-header"},Ae={class:"header-icon"},ze={class:"header-text"},Ie=["disabled"],Ve={class:"modal-tabs-section"},Be=["onClick"],Me={key:0,class:"tab-badge"},Pe={class:"animate-fade-in"},Se={class:"form-grid"},$e={class:"form-group full-width"},Ke={class:"type-selector-group"},Ne={class:"form-group"},Re={class:"input-wrapper"},Le={class:"form-group"},qe={class:"input-wrapper"},Fe=["value"],Ee={class:"form-group"},je={class:"input-wrapper"},He=["value"],Oe={class:"form-group"},Ge={class:"input-wrapper"},Je=["value"],Qe={class:"form-group full-width"},Xe={class:"input-wrapper"},Ye={class:"form-group full-width"},We={class:"amount-entry-card shadow-sm"},Ze={key:0,class:"amount-sync-warning animate-bounce-subtle"},ta={key:0,class:"sync-item"},ea={key:1,class:"sync-item"},aa={class:"form-group full-width"},sa={class:"input-wrapper plain"},na={class:"animate-fade-in"},la={class:"section-notice mb-6 bg-emerald-50 text-emerald-700 border border-emerald-100 p-4 rounded-xl flex gap-3 items-start"},oa={class:"denominations-table-container"},ia={class:"denominations-table"},da={class:"compact-input-wrapper"},ra=["onUpdate:modelValue","onInput"],ua={class:"compact-input-wrapper"},pa=["onUpdate:modelValue","onInput"],ca={class:"text-right"},ma={class:"text-sm font-extrabold text-slate-700"},va={class:"text-right"},_a={class:"actions-group"},ba=["onClick"],fa={key:0},ga={class:"bg-indigo-50/30"},ha={class:"text-right py-4"},xa={class:"text-lg font-black text-indigo-600"},ya={class:"animate-fade-in"},ka={class:"section-notice mb-6 bg-blue-50 text-blue-700 border border-blue-100 p-4 rounded-xl flex gap-3 items-start"},Ca={class:"envelope-grid"},wa={class:"envelope-card-header"},Ta={class:"env-index"},Ua={class:"actions-group"},Da=["onClick"],Aa={class:"envelope-card-body"},za={class:"env-form-group"},Ia=["onUpdate:modelValue"],Va={class:"env-form-group"},Ba=["onUpdate:modelValue"],Ma={class:"env-form-group col-span-2"},Pa=["onUpdate:modelValue"],Sa=["value"],$a={class:"env-form-group col-span-2"},Ka=["onUpdate:modelValue"],Na={class:"icon-circle-btn"},Ra={class:"envelope-summary-bar mt-8"},La={class:"flex flex-col"},qa={class:"text-2xl font-black text-slate-800"},Fa={class:"flex flex-col text-right"},Ea={class:"text-2xl font-black text-indigo-600"},ja={class:"modal-footer"},Ha={class:"left-controls text-[10px] text-muted font-medium"},Oa={class:"flex items-center gap-1"},Ga={class:"right-actions"},Ja=["disabled"],Qa=["disabled"],Xa={__name:"CashTransactions",setup(Ya){const U=mt(),K=c([]),N=c(!0),C=c(!1),R=c(!1),D=c(null),L=c(""),w=c(""),q=c(""),O=c(null),A=c("basic"),G=()=>({church_id:U.activeBranch,transaction_date:new Date().toISOString().split("T")[0],type:"income",total_amount:0,cash_category_id:null,payment_method_id:null,fund_id:null,description:"",reference_number:"",denominations:[],envelopes:[]}),s=c(G()),at=$(()=>[{id:"basic",label:"Informasi Dasar",icon:xt},{id:"denominations",label:"Denominasi",icon:yt,count:s.value.denominations.length},{id:"envelopes",label:"Rincian Amplop",icon:kt,count:s.value.envelopes.length}]),st=$(()=>V.value.filter(n=>n.type===s.value.type)),z=$(()=>s.value.denominations.reduce((n,e)=>n+parseFloat(e.subtotal||0),0)),I=$(()=>s.value.envelopes.reduce((n,e)=>n+parseFloat(e.amount||0),0));vt(()=>s.value.type,n=>{s.value.cash_category_id&&(V.value.find(a=>a.id===s.value.cash_category_id&&a.type===n)||(s.value.cash_category_id=null))});const V=c([]),P=c([]),J=c([]),Q=c([]),m=c({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),nt=async()=>{try{const[n,e,a,v]=await Promise.all([y.get("/cash-categories",{params:{per_page:999,church_id:U.activeBranch}}),y.get("/payment-methods",{params:{per_page:999,church_id:U.activeBranch}}),y.get("/funds",{params:{per_page:999,church_id:U.activeBranch}}),y.get("/jemaat",{params:{per_page:999,church_id:U.activeBranch}})]);V.value=n.data.data,P.value=e.data.data,J.value=a.data.data,Q.value=v.data.data}catch(n){console.error("Master data failed",n)}},_=async(n=1)=>{N.value=!0;try{const e=await y.get("/cash-transactions",{params:{page:n,per_page:m.value.per_page,search:L.value,type:w.value,cash_category_id:q.value,church_id:U.activeBranch}});K.value=e.data.data,m.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total,from:e.data.from,to:e.data.to}}catch(e){console.error("Fetch error:",e)}finally{N.value=!1}},lt=()=>{clearTimeout(O.value),O.value=setTimeout(()=>_(1),500)},ot=n=>n?new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",T=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),it=()=>{s.value.denominations.push({denomination_value:0,quantity:1,subtotal:0})},dt=n=>{s.value.denominations.splice(n,1)},X=n=>{const e=s.value.denominations[n];e.subtotal=(e.denomination_value||0)*(e.quantity||0)},rt=()=>{s.value.envelopes.push({envelope_number:"",amount:0,member_id:null,notes:""})},ut=n=>{s.value.envelopes.splice(n,1)},Y=(n=null)=>{if(A.value="basic",n)D.value=n.id,s.value={...n,transaction_date:n.transaction_date.split("T")[0],denominations:n.denominations||[],envelopes:n.envelopes||[]};else{if(D.value=null,s.value=G(),V.value.length){const e=V.value.find(a=>a.type==="income");e&&(s.value.cash_category_id=e.id)}P.value.length&&(s.value.payment_method_id=P.value[0].id)}R.value=!0},S=()=>{R.value=!1},W=async()=>{if(!s.value.cash_category_id||!s.value.payment_method_id||!s.value.total_amount){M.fire("Input Tidak Lengkap","Silakan lengkapi kategori, metode, dan jumlah nominal.","warning");return}C.value=!0;try{const n={...s.value};D.value?await y.put(`/cash-transactions/${D.value}`,n):await y.post("/cash-transactions",n),M.fire({icon:"success",title:"Berhasil",text:"Transaksi telah dicatat ke buku kas.",timer:2e3,showConfirmButton:!1}),_(m.value.current_page),S()}catch(n){M.fire("Error",n.response?.data?.message||"Gagal menyimpan transaksi","error")}finally{C.value=!1}},pt=async n=>{if((await M.fire({title:"Hapus Transaksi?",text:"Data finansial yang dihapus akan mempengaruhi laporan keuangan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e11d48",confirmButtonText:"Ya, Hapus Permanen"})).isConfirmed)try{await y.delete(`/cash-transactions/${n.id}`),_(),M.fire("Terhapus!","Catatan transaksi telah dikeluarkan dari buku kas.","success")}catch{M.fire("Error","Gagal menghapus data","error")}};return _t(()=>{nt(),_()}),(n,e)=>(l(),o("div",$t,[t("div",Kt,[e[25]||(e[25]=t("div",{class:"title-group"},[t("h1",{class:"page-title"},"Transaksi Kas"),t("p",{class:"page-subtitle"},"Pencatatan buku kas, donasi, persembahan, dan pengeluaran operasional")],-1)),t("div",Nt,[t("div",Rt,[d(r(Ct),{size:"18",class:"search-icon"}),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>L.value=a),type:"text",placeholder:"Cari referensi atau deskripsi...",class:"search-input",onInput:lt},null,544),[[g,L.value]])]),t("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=a=>Y())},[d(r(E),{size:"18"}),e[23]||(e[23]=b()),e[24]||(e[24]=t("span",null,"Catat Transaksi",-1))])])]),t("div",Lt,[t("div",qt,[t("div",Ft,[t("div",Et,[t("div",jt,[e[26]||(e[26]=t("span",{class:"filter-label"},"Tipe Aliran Kas",-1)),t("div",Ht,[t("button",{class:x(["pill-btn",{active:w.value===""}]),onClick:e[2]||(e[2]=a=>{w.value="",_(1)})},"Semua",2),t("button",{class:x(["pill-btn",{active:w.value==="income"}]),onClick:e[3]||(e[3]=a=>{w.value="income",_(1)})},"Masuk",2),t("button",{class:x(["pill-btn",{active:w.value==="expense"}]),onClick:e[4]||(e[4]=a=>{w.value="expense",_(1)})},"Keluar",2)])]),e[29]||(e[29]=t("div",{class:"v-divider"},null,-1)),t("div",Ot,[e[28]||(e[28]=t("span",{class:"filter-label"},"Kategori",-1)),p(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>q.value=a),onChange:e[6]||(e[6]=a=>_(1)),class:"filter-select-minimal"},[e[27]||(e[27]=t("option",{value:""},"Semua Kategori",-1)),(l(!0),o(f,null,h(V.value,a=>(l(),o("option",{key:a.id,value:a.id},i(a.name),9,Gt))),128))],544),[[B,q.value]])])]),t("div",Jt,[e[30]||(e[30]=t("span",{class:"text-[10px] font-bold text-slate-400 uppercase block mb-1"},"Total Terfilter",-1)),t("span",Qt,i(T(m.value.total_amount_sum||0)),1)])])])]),t("div",Xt,[N.value?(l(),o("div",Yt,[...e[31]||(e[31]=[t("div",{class:"spinner"},null,-1),t("p",null,"Memuat catatan kas...",-1)])])):K.value.length===0?(l(),o("div",Wt,[t("div",Zt,[d(r(tt),{size:"48"})]),e[32]||(e[32]=t("p",null,"Tidak ada transaksi ditemukan.",-1))])):(l(),o("div",te,[t("table",ee,[e[33]||(e[33]=t("thead",null,[t("tr",null,[t("th",{style:{width:"180px"}},"Tanggal & Ref"),t("th",null,"Deskripsi / Kategori"),t("th",{style:{width:"120px"}},"Tipe"),t("th",{style:{width:"150px"}},"Metode / Dana"),t("th",{class:"text-right",style:{width:"180px"}},"Jumlah Total"),t("th",{class:"text-right",style:{width:"120px"}},"Petugas"),t("th",{class:"text-right"},"Aksi")])],-1)),t("tbody",null,[(l(!0),o(f,null,h(K.value,a=>(l(),o("tr",{key:a.id,class:"row-hover"},[t("td",null,[t("div",ae,[t("span",se,i(ot(a.transaction_date)),1),t("span",ne,"ID: #"+i(a.id),1)])]),t("td",null,[t("div",le,[t("span",{class:"text-dark font-medium text-sm truncate",title:a.description},i(a.description||"-"),9,oe),t("div",ie,[t("span",de,i(a.cash_category?.name),1),a.denominations_count||a.denominations?.length?(l(),o("span",re,"BERINCIAN")):k("",!0)])])]),t("td",null,[t("span",{class:x(["status-pill",a.type==="income"?"active":"inactive"])},i(a.type==="income"?"Masuk":"Keluar"),3)]),t("td",null,[t("div",ue,[t("span",pe,i(a.payment_method?.name),1),a.fund?(l(),o("span",ce,i(a.fund?.name),1)):k("",!0)])]),t("td",me,[t("div",{class:x(["currency-text",a.type==="income"?"text-emerald-600":"text-rose-600"])},i(T(a.total_amount)),3)]),t("td",ve,[t("div",_e,i(a.creator?.name||"Sistem"),1)]),t("td",null,[t("div",be,[t("button",{class:"action-btn edit",onClick:v=>Y(a),title:"Edit"},[d(r(Ut),{size:"14"})],8,fe),t("button",{class:"action-btn delete",onClick:v=>pt(a),title:"Hapus"},[d(r(j),{size:"14"})],8,ge)])])]))),128))])]),t("div",he,[t("div",xe,[e[35]||(e[35]=t("span",{class:"text-xs font-bold text-muted"},"TAMPILKAN",-1)),p(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>m.value.per_page=a),onChange:e[8]||(e[8]=a=>_(1))},[...e[34]||(e[34]=[t("option",{value:10},"10 data",-1),t("option",{value:25},"25 data",-1),t("option",{value:50},"50 data",-1)])],544),[[B,m.value.per_page]])]),t("div",ye,[t("span",ke,[t("b",null,i(m.value.from||0)+"-"+i(m.value.to||0),1),e[36]||(e[36]=b(" dari ",-1)),t("b",null,i(m.value.total),1)]),t("div",Ce,[t("button",{class:"page-btn",disabled:m.value.current_page===1,onClick:e[9]||(e[9]=a=>_(m.value.current_page-1))},[d(r(wt),{size:"18"})],8,we),t("button",{class:"page-btn",disabled:m.value.current_page===m.value.last_page,onClick:e[10]||(e[10]=a=>_(m.value.current_page+1))},[d(r(Tt),{size:"18"})],8,Te)])])])]))]),d(ft,{name:"modal-fade"},{default:bt(()=>[R.value?(l(),o("div",{key:0,class:"modal-overlay",onClick:e[22]||(e[22]=Z(a=>!C.value&&S(),["self"]))},[t("div",Ue,[t("div",De,[t("div",Ae,[d(r(tt),{size:"24"})]),t("div",ze,[t("h2",null,i(D.value?"Update Transaksi":"Catat Transaksi Baru"),1),e[37]||(e[37]=t("p",null,"Lengkapi detail pemasukan atau pengeluaran kas di bawah ini",-1))]),t("button",{class:"close-btn",onClick:S,disabled:C.value},[d(r(Dt),{size:"20"})],8,Ie)]),t("div",Ve,[(l(!0),o(f,null,h(at.value,a=>(l(),o("button",{key:a.id,class:x(["modal-tab-btn",A.value===a.id?"active":""]),onClick:v=>A.value=a.id},[(l(),gt(ht(a.icon),{size:"16"})),t("span",null,i(a.label),1),a.count?(l(),o("div",Me,i(a.count),1)):k("",!0)],10,Be))),128))]),t("form",{onSubmit:Z(W,["prevent"]),class:"modal-body custom-scrollbar"},[p(t("div",Pe,[t("div",Se,[t("div",$e,[e[40]||(e[40]=t("label",{class:"form-label"},[b("Tipe Transaksi "),t("span",{class:"required"},"*")],-1)),t("div",Ke,[t("button",{type:"button",class:x(["type-selector income",{active:s.value.type==="income"}]),onClick:e[11]||(e[11]=a=>s.value.type="income")},[d(r(zt),{size:"20"}),e[38]||(e[38]=t("div",{class:"text-left"},[t("span",{class:"block text-xs font-bold"},"PEMASUKAN"),t("span",{class:"block text-[10px] opacity-70"},"Uang Masuk / Kas In")],-1))],2),t("button",{type:"button",class:x(["type-selector expense",{active:s.value.type==="expense"}]),onClick:e[12]||(e[12]=a=>s.value.type="expense")},[d(r(It),{size:"20"}),e[39]||(e[39]=t("div",{class:"text-left"},[t("span",{class:"block text-xs font-bold"},"PENGELUARAN"),t("span",{class:"block text-[10px] opacity-70"},"Uang Keluar / Kas Out")],-1))],2)])]),t("div",Ne,[e[41]||(e[41]=t("label",{class:"form-label"},[b("Tanggal Transaksi "),t("span",{class:"required"},"*")],-1)),t("div",Re,[d(r(Vt),{size:"18",class:"input-icon"}),p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>s.value.transaction_date=a),type:"date",required:""},null,512),[[g,s.value.transaction_date]])])]),t("div",Le,[e[43]||(e[43]=t("label",{class:"form-label"},[b("Kategori Kas "),t("span",{class:"required"},"*")],-1)),t("div",qe,[d(r(Bt),{size:"18",class:"input-icon"}),p(t("select",{"onUpdate:modelValue":e[14]||(e[14]=a=>s.value.cash_category_id=a),required:""},[e[42]||(e[42]=t("option",{value:null,disabled:""},"Pilih Kategori",-1)),(l(!0),o(f,null,h(st.value,a=>(l(),o("option",{key:a.id,value:a.id},i(a.name),9,Fe))),128))],512),[[B,s.value.cash_category_id]])])]),t("div",Ee,[e[45]||(e[45]=t("label",{class:"form-label"},[b("Metode Pembayaran "),t("span",{class:"required"},"*")],-1)),t("div",je,[d(r(Mt),{size:"18",class:"input-icon"}),p(t("select",{"onUpdate:modelValue":e[15]||(e[15]=a=>s.value.payment_method_id=a),required:""},[e[44]||(e[44]=t("option",{value:null,disabled:""},"Pilih Metode",-1)),(l(!0),o(f,null,h(P.value,a=>(l(),o("option",{key:a.id,value:a.id},i(a.name),9,He))),128))],512),[[B,s.value.payment_method_id]])])]),t("div",Oe,[e[47]||(e[47]=t("label",{class:"form-label"},"Dana / Fund (Opsi)",-1)),t("div",Ge,[d(r(Pt),{size:"18",class:"input-icon"}),p(t("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>s.value.fund_id=a)},[e[46]||(e[46]=t("option",{value:null},"Kas Utama / Tanpa Dana Khusus",-1)),(l(!0),o(f,null,h(J.value,a=>(l(),o("option",{key:a.id,value:a.id},i(a.name),9,Je))),128))],512),[[B,s.value.fund_id]])])]),t("div",Qe,[e[48]||(e[48]=t("label",{class:"form-label"},"Nomor Referensi",-1)),t("div",Xe,[d(r(St),{size:"18",class:"input-icon"}),p(t("input",{"onUpdate:modelValue":e[17]||(e[17]=a=>s.value.reference_number=a),type:"text",placeholder:"Contoh: INV-2023-001"},null,512),[[g,s.value.reference_number]])])]),t("div",Ye,[e[50]||(e[50]=t("label",{class:"form-label text-indigo-600"},[b("Total Nominal Transaksi "),t("span",{class:"required"},"*")],-1)),t("div",We,[e[49]||(e[49]=t("div",{class:"currency-symbol"},"RP",-1)),p(t("input",{"onUpdate:modelValue":e[18]||(e[18]=a=>s.value.total_amount=a),type:"number",step:"1",required:"",placeholder:"0",class:"amount-input"},null,512),[[g,s.value.total_amount]]),z.value>0||I.value>0?(l(),o("div",Ze,[z.value>0&&z.value!==parseFloat(s.value.total_amount)?(l(),o("div",ta,[d(r(H),{size:"12"}),t("span",null,"Sesuai Denominasi: "+i(T(z.value)),1),t("button",{type:"button",onClick:e[19]||(e[19]=a=>s.value.total_amount=z.value)},"Sinkronkan")])):k("",!0),I.value>0&&I.value!==parseFloat(s.value.total_amount)?(l(),o("div",ea,[d(r(H),{size:"12"}),t("span",null,"Sesuai Amplop: "+i(T(I.value)),1),t("button",{type:"button",onClick:e[20]||(e[20]=a=>s.value.total_amount=I.value)},"Sinkronkan")])):k("",!0)])):k("",!0)])]),t("div",aa,[e[51]||(e[51]=t("label",{class:"form-label"},"Keterangan / Deskripsi",-1)),t("div",sa,[p(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=a=>s.value.description=a),rows:"3",placeholder:"Tuliskan catatan detail transaksi di sini...",class:"custom-scrollbar"},null,512),[[g,s.value.description]])])])])],512),[[F,A.value==="basic"]]),p(t("div",na,[t("div",la,[d(r(et),{size:"20",class:"mt-0.5"}),e[52]||(e[52]=t("div",null,[t("p",{class:"font-bold text-sm"},"Rincian Denominasi (Pecahan Uang)"),t("p",{class:"text-xs opacity-80"},"Gunakan bagian ini untuk merinci jumlah lembaran uang tunai yang diterima atau dikeluarkan.")],-1))]),t("div",oa,[t("table",ia,[e[56]||(e[56]=t("thead",null,[t("tr",null,[t("th",{class:"w-[250px]"},"Pecahan (RP)"),t("th",null,"Jumlah (Lembar)"),t("th",{class:"text-right"},"Subtotal"),t("th",{class:"w-[50px]"})])],-1)),t("tbody",null,[(l(!0),o(f,null,h(s.value.denominations,(a,v)=>(l(),o("tr",{key:v,class:"denom-row"},[t("td",null,[t("div",da,[p(t("input",{"onUpdate:modelValue":u=>a.denomination_value=u,type:"number",onInput:u=>X(v),class:"compact-input font-bold"},null,40,ra),[[g,a.denomination_value]])])]),t("td",null,[t("div",ua,[p(t("input",{"onUpdate:modelValue":u=>a.quantity=u,type:"number",onInput:u=>X(v),class:"compact-input"},null,40,pa),[[g,a.quantity]])])]),t("td",ca,[t("span",ma,i(T(a.subtotal)),1)]),t("td",va,[t("div",_a,[t("button",{type:"button",onClick:u=>dt(v),class:"action-btn delete",title:"Hapus Baris"},[d(r(j),{size:"16"})],8,ba)])])]))),128)),s.value.denominations.length===0?(l(),o("tr",fa,[...e[53]||(e[53]=[t("td",{colspan:"4",class:"py-12 text-center text-slate-400 italic"},"Belum ada rincian pecahan. Tambahkan untuk memudahkan penghitungan uang tunai.",-1)])])):k("",!0)]),t("tfoot",null,[t("tr",ga,[e[54]||(e[54]=t("td",{colspan:"2",class:"text-right font-bold text-slate-500 uppercase text-[10px] py-4"},"Total Denominasi",-1)),t("td",ha,[t("span",xa,i(T(z.value)),1)]),e[55]||(e[55]=t("td",null,null,-1))])])]),t("button",{type:"button",onClick:it,class:"add-row-btn mt-4"},[d(r(E),{size:"16"}),e[57]||(e[57]=b(" Tambah Pecahan Baru ",-1))])])],512),[[F,A.value==="denominations"]]),p(t("div",ya,[t("div",ka,[d(r(et),{size:"20",class:"mt-0.5"}),e[58]||(e[58]=t("div",null,[t("p",{class:"font-bold text-sm"},"Rincian Amplop Jemaat"),t("p",{class:"text-xs opacity-80"},"Catat persembahan atau pembayaran yang menggunakan bantuan amplop untuk identifikasi jemaat.")],-1))]),t("div",Ca,[(l(!0),o(f,null,h(s.value.envelopes,(a,v)=>(l(),o("div",{key:v,class:"envelope-card-premium animate-slide-in"},[t("div",wa,[t("span",Ta,"#"+i(v+1),1),t("div",Ua,[t("button",{type:"button",onClick:u=>ut(v),class:"action-btn delete",title:"Hapus Amplop"},[d(r(j),{size:"14"})],8,Da)])]),t("div",Aa,[t("div",za,[e[59]||(e[59]=t("label",null,"NOMINAL (RP)",-1)),p(t("input",{"onUpdate:modelValue":u=>a.amount=u,type:"number",class:"env-input font-bold text-indigo-600"},null,8,Ia),[[g,a.amount]])]),t("div",Va,[e[60]||(e[60]=t("label",null,"NO. AMPLOP",-1)),p(t("input",{"onUpdate:modelValue":u=>a.envelope_number=u,type:"text",placeholder:"Opsional",class:"env-input"},null,8,Ba),[[g,a.envelope_number]])]),t("div",Ma,[e[62]||(e[62]=t("label",null,"JEMAAT / PENGIRIM",-1)),p(t("select",{"onUpdate:modelValue":u=>a.member_id=u,class:"env-select"},[e[61]||(e[61]=t("option",{value:null},"Anonim / Internal Gereja",-1)),(l(!0),o(f,null,h(Q.value,u=>(l(),o("option",{key:u.id,value:u.id},i(u.nama_lengkap)+" ("+i(u.no_anggota)+")",9,Sa))),128))],8,Pa),[[B,a.member_id]])]),t("div",$a,[e[63]||(e[63]=t("label",null,"CATATAN KHUSUS",-1)),p(t("textarea",{"onUpdate:modelValue":u=>a.notes=u,class:"env-textarea",placeholder:"Tuliskan jika ada pesan khusus pada amplop...",rows:"1"},null,8,Ka),[[g,a.notes]])])])]))),128)),t("button",{type:"button",onClick:rt,class:"add-envelope-btn"},[t("div",Na,[d(r(E),{size:"24"})]),e[64]||(e[64]=t("span",{class:"font-bold text-xs"},"TAMBAH AMPLOP",-1))])]),t("div",Ra,[t("div",La,[e[65]||(e[65]=t("span",{class:"text-[10px] font-bold text-slate-400 uppercase"},"Total Amplop Terdata",-1)),t("span",qa,i(T(I.value)),1)]),e[68]||(e[68]=t("div",{class:"h-10 w-[1px] bg-slate-200"},null,-1)),t("div",Fa,[e[67]||(e[67]=t("span",{class:"text-[10px] font-bold text-slate-400 uppercase"},"Jumlah Item",-1)),t("span",Ea,[b(i(s.value.envelopes.length)+" ",1),e[66]||(e[66]=t("span",{class:"text-xs text-slate-400 font-medium italic"},"amplop",-1))])])])],512),[[F,A.value==="envelopes"]])],32),t("div",ja,[t("div",Ha,[t("span",Oa,[d(r(H),{size:"12"}),e[69]||(e[69]=b(" Tanda ",-1)),e[70]||(e[70]=t("span",{class:"text-rose-500 font-bold"},"*",-1)),e[71]||(e[71]=b(" wajib diisi demi validitas audit data.",-1))])]),t("div",Ga,[t("button",{type:"button",class:"btn btn-ghost",onClick:S,disabled:C.value},"Batal",8,Ja),t("button",{type:"button",onClick:W,class:"btn btn-primary btn-lg",disabled:C.value},[C.value?(l(),o(f,{key:0},[e[72]||(e[72]=t("div",{class:"spinner small"},null,-1)),e[73]||(e[73]=t("span",null,"Menyimpan...",-1))],64)):(l(),o(f,{key:1},[d(r(At),{size:"18"}),t("span",null,i(D.value?"Konfirmasi Perubahan":"Simpan Transaksi"),1)],64))],8,Qa)])])])])):k("",!0)]),_:1})]))}},gs=ct(Xa,[["__scopeId","data-v-3336ad3b"]]);export{gs as default};
