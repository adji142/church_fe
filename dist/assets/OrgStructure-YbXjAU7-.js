import{_ as b,r as v,z as B,f as C,c as a,o as t,a as e,d as u,x as k,m as h,s as N,k as p,t as g,q as _,e as x,F as y,n as f,T as S,u as T,A as $,i as z,j as A,h as D}from"./index-Mv3MxCR1.js";import{L as R,U as L,R as O}from"./user-round-BAdrVHxF.js";import{C as V}from"./chevron-right-u8dkcCrv.js";import{L as w}from"./layers-ChaLHLIF.js";import"./createLucideIcon-DBeZuCHW.js";const E={class:"icon-box"},M={class:"node-info"},j={class:"node-name"},F={class:"node-type"},q={key:0,class:"expand-icon"},I={key:0,class:"node-children"},U={__name:"TreeNode",props:{node:{type:Object,required:!0},type:{type:String,default:"department"}},setup(o){const l=o,r=v(!0),n=B(()=>l.node.children?.length>0||l.node.positions?.length>0),c=()=>{n.value&&(r.value=!r.value)};return(d,s)=>{const m=C("tree-node",!0);return t(),a("div",{class:_(["tree-node",o.type])},[e("div",{class:"node-content",onClick:c},[e("div",E,[(t(),h(N(o.type==="department"?p(R):p(L)),{size:"18"}))]),e("div",M,[e("span",j,g(o.node.name),1),e("span",F,g(o.type==="department"?"DEPARTEMEN":"JABATAN"),1)]),n.value?(t(),a("div",q,[u(p(V),{size:"16",class:_({rotated:r.value})},null,8,["class"])])):k("",!0)]),u(S,{name:"slide-fade"},{default:x(()=>[r.value&&n.value?(t(),a("div",I,[(t(!0),a(y,null,f(o.node.children,i=>(t(),h(m,{key:"dept-"+i.id,node:i,type:"department"},null,8,["node"]))),128)),(t(!0),a(y,null,f(o.node.positions,i=>(t(),h(m,{key:"pos-"+i.id,node:i,type:"position"},null,8,["node"]))),128))])):k("",!0)]),_:1})],2)}}},J=b(U,[["__scopeId","data-v-e762a67e"]]),K={class:"org-structure-page"},P={class:"header-section"},G={class:"header-actions"},H=["disabled"],Q={class:"card tree-card"},W={key:0,class:"loading-state"},X={key:1,class:"empty-state"},Y={class:"empty-icon"},Z={key:2,class:"tree-container"},ee={__name:"OrgStructure",setup(o){const l=T(),r=v([]),n=v(!0),c=async()=>{if(l.activeBranch){n.value=!0;try{const d=await A.get("/departments-tree",{params:{branch_id:l.activeBranch.id}});r.value=d.data}catch(d){console.error("Failed to fetch tree data",d)}finally{n.value=!1}}};return $(()=>l.activeBranch,d=>{d&&c()},{immediate:!0}),z(c),(d,s)=>{const m=C("router-link");return t(),a("div",K,[e("div",P,[s[1]||(s[1]=e("div",{class:"title-group"},[e("h1",{class:"page-title"},"Struktur Organisasi"),e("p",{class:"page-subtitle"},"Visualisasi hierarki departemen dan jabatan organisasi")],-1)),e("div",G,[e("button",{class:"btn btn-ghost",onClick:c,disabled:n.value},[u(p(O),{size:"18",class:_({"spin-anim":n.value})},null,8,["class"]),s[0]||(s[0]=e("span",null,"Refresh",-1))],8,H)])]),e("div",Q,[n.value?(t(),a("div",W,[...s[2]||(s[2]=[e("div",{class:"spinner"},null,-1),e("p",null,"Menyusun hierarki organisasi...",-1)])])):r.value.length===0?(t(),a("div",X,[e("div",Y,[u(p(w),{size:"48"})]),s[4]||(s[4]=e("p",null,"Struktur belum didefinisikan. Silakan tambahkan departemen terlebih dahulu.",-1)),u(m,{to:"/departments",class:"btn btn-primary mt-4"},{default:x(()=>[...s[3]||(s[3]=[D("Ke Master Departemen",-1)])]),_:1})])):(t(),a("div",Z,[(t(!0),a(y,null,f(r.value,i=>(t(),h(J,{key:i.id,node:i,type:"department"},null,8,["node"]))),128))]))])])}}},re=b(ee,[["__scopeId","data-v-65352936"]]);export{re as default};
