import{_ as z,u as B,r as p,i as I,c as o,a as t,d,h as P,q as V,k as c,b as m,v as k,l as D,F as f,n as g,j as x,o as n,t as r}from"./index-Mv3MxCR1.js";import{R as L}from"./refresh-ccw-CKToBt2C.js";import{C}from"./calendar-COvuOzBD.js";import{M as N}from"./map-pin-DIz-n_0r.js";import{B as U}from"./briefcase-DeOdw5oH.js";import{F as A}from"./file-text-CPaFxqa6.js";import"./createLucideIcon-DBeZuCHW.js";const K={class:"master-data-page wide"},O={class:"header-section"},Y={class:"header-actions"},j={class:"card filter-card report-section-gap"},q={class:"p-6"},E={class:"flex flex-wrap items-end gap-6"},J={class:"filter-item flex-1 min-w-[300px]"},G={class:"flex items-center gap-2"},H={class:"input-wrapper-report flex-1"},Q={class:"input-wrapper-report flex-1"},W={class:"p-6"},X={class:"filter-item min-w-[200px]"},Z={class:"input-wrapper-report"},$=["value"],tt={class:"filter-item min-w-[200px]"},et={class:"input-wrapper-report"},st=["value"],at={class:"card table-card shadow-sm border-slate-200"},ot={key:0,class:"loading-state h-64"},nt={key:1,class:"empty-state h-64"},lt={class:"empty-icon"},rt={key:2,class:"table-container shadow-none"},it={class:"modern-table border-none"},dt={class:"font-medium text-slate-700"},ct={class:"flex flex-col"},pt={class:"font-bold"},ut={class:"text-[10px] text-slate-400"},_t={class:"text-right font-semibold text-slate-600"},ht={class:"text-right font-bold text-emerald-600"},mt={class:"text-right font-bold text-rose-600"},vt={class:"text-right font-black text-indigo-600"},ft={__name:"PeriodCashReport",setup(gt){const F=B(),u=p(!0),v=p([]),_=new Date,S=new Date(_.getFullYear(),_.getMonth(),1).toISOString().split("T")[0],M=new Date(_.getFullYear(),_.getMonth()+1,0).toISOString().split("T")[0],l=p({start_date:S,end_date:M,church_id:F.activeBranch,fund_id:null}),b=p([]),y=p([]),R=async()=>{try{const[a,e]=await Promise.all([x.get("/branches",{params:{per_page:999}}),x.get("/funds",{params:{per_page:999}})]);b.value=a.data.data,y.value=e.data.data}catch(a){console.error("Failed to fetch filter options",a)}},i=async()=>{u.value=!0;try{const a=await x.get("/reports/cash-period",{params:l.value});v.value=a.data.data}catch(a){console.error("Failed to fetch report",a)}finally{u.value=!1}},w=a=>a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-",h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return I(()=>{R(),i()}),(a,e)=>(n(),o("div",K,[t("div",O,[e[6]||(e[6]=t("div",{class:"title-group"},[t("h1",{class:"page-title"},"Laporan Kas per Periode"),t("p",{class:"page-subtitle"},"Rekapitulasi keuangan berdasarkan periode (mingguan/bulanan)")],-1)),t("div",Y,[t("button",{class:"btn btn-primary",onClick:i},[d(c(L),{size:"18",class:V({"animate-spin":u.value})},null,8,["class"]),e[4]||(e[4]=P()),e[5]||(e[5]=t("span",null,"Refresh Laporan",-1))])])]),t("div",j,[t("div",q,[t("div",E,[t("div",J,[e[8]||(e[8]=t("span",{class:"filter-label"},"Periode Tanggal",-1)),t("div",G,[t("div",H,[d(c(C),{size:"16",class:"input-icon"}),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.start_date=s),type:"date",onChange:i,class:"report-input"},null,544),[[k,l.value.start_date]])]),e[7]||(e[7]=t("span",{class:"text-slate-400 font-bold"},"s/d",-1)),t("div",Q,[d(c(C),{size:"16",class:"input-icon"}),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.end_date=s),type:"date",onChange:i,class:"report-input"},null,544),[[k,l.value.end_date]])])])])])]),t("div",W,[t("div",X,[e[10]||(e[10]=t("span",{class:"filter-label"},"Cabang / Branch",-1)),t("div",Z,[d(c(N),{size:"16",class:"input-icon"}),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.church_id=s),onChange:i,class:"report-select"},[e[9]||(e[9]=t("option",{value:null},"Semua Cabang",-1)),(n(!0),o(f,null,g(b.value,s=>(n(),o("option",{key:s.id,value:s.id},r(s.name),9,$))),128))],544),[[D,l.value.church_id]])])]),t("div",tt,[e[12]||(e[12]=t("span",{class:"filter-label"},"Jenis Dana (Fund)",-1)),t("div",et,[d(c(U),{size:"16",class:"input-icon"}),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.fund_id=s),onChange:i,class:"report-select"},[e[11]||(e[11]=t("option",{value:null},"Semua Dana",-1)),(n(!0),o(f,null,g(y.value,s=>(n(),o("option",{key:s.id,value:s.id},r(s.name),9,st))),128))],544),[[D,l.value.fund_id]])])])])]),t("div",at,[u.value?(n(),o("div",ot,[...e[13]||(e[13]=[t("div",{class:"spinner"},null,-1),t("p",null,"Menghasilkan laporan...",-1)])])):v.value.length===0?(n(),o("div",nt,[t("div",lt,[d(c(A),{size:"48"})]),e[14]||(e[14]=t("p",null,"Tidak ada data periode ditemukan.",-1))])):(n(),o("div",rt,[t("table",it,[e[15]||(e[15]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",null,"Periode"),t("th",{class:"text-right"},"Saldo Awal"),t("th",{class:"text-right"},"Total Masuk"),t("th",{class:"text-right"},"Total Keluar"),t("th",{class:"text-right"},"Saldo Akhir")])],-1)),t("tbody",null,[(n(!0),o(f,null,g(v.value,(s,T)=>(n(),o("tr",{key:T,class:"row-hover border-b border-slate-100 last:border-0"},[t("td",dt,[t("div",ct,[t("span",pt,r(s.period_name),1),t("span",ut,r(w(s.start_date))+" - "+r(w(s.end_date)),1)])]),t("td",_t,r(h(s.opening_balance)),1),t("td",ht,r(h(s.total_income)),1),t("td",mt,r(h(s.total_expense)),1),t("td",vt,r(h(s.closing_balance)),1)]))),128))])])]))])]))}},Ft=z(ft,[["__scopeId","data-v-3e46b994"]]);export{Ft as default};
