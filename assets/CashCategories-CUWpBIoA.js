import{_ as E,u as F,r as p,i as L,c,a as e,d as l,b as g,k as o,v as x,h as b,F as T,n as H,l as U,t as d,e as G,T as j,j as h,o as n,q as Q,x as R,w as M,m as S}from"./index-Mv3MxCR1.js";import{S as f}from"./sweetalert2.esm.all-BQxta0Da.js";import{S as X}from"./search-DW_529iS.js";import{P}from"./plus-BF4bXWAK.js";import{T as V}from"./tag-Dx8Wwxbt.js";import{C as Y}from"./chevron-left-C_DfDUMJ.js";import{C as J}from"./chevron-right-u8dkcCrv.js";import{P as $,T as O}from"./trash-2-CXOSxmzs.js";import{X as W,C as Z}from"./x-D8hPaNXE.js";import{A as ee}from"./arrow-up-down-Cbps0Qas.js";import"./createLucideIcon-DBeZuCHW.js";const ae={class:"master-data-page wide"},te={class:"header-section"},se={class:"header-actions"},oe={class:"search-wrapper"},le={class:"card table-card"},ne={key:0,class:"loading-state"},ie={key:1,class:"empty-state"},re={class:"empty-icon"},de={key:2,class:"table-container"},ue={class:"modern-table"},pe={class:"name-column"},ce={class:"font-bold text-dark"},ve={class:"text-xs text-muted"},me={class:"actions-group"},ge=["onClick"],fe=["onClick"],_e={class:"pagination-footer"},be={class:"per-page-selector"},he={class:"pagination-controls"},ke={class:"page-info"},ye={class:"page-buttons"},Ce=["disabled"],we=["disabled"],xe={class:"modal-content"},Te={class:"modal-header"},Ke={class:"header-icon"},ze={class:"header-text"},Be=["disabled"],De={class:"form-grid"},Ue={class:"form-group"},Me={class:"input-wrapper"},Se=["disabled"],Pe={class:"form-group"},Ve={class:"input-wrapper"},$e=["disabled"],Ie={class:"form-group full-width"},Ae={class:"input-wrapper"},Ne=["disabled"],qe={class:"modal-footer"},Ee=["disabled"],Fe=["disabled"],Le={__name:"CashCategories",setup(He){const K=F(),k=p([]),y=p(!0),i=p(!1),C=p(!1),v=p(null),w=p(""),z=p(null),s=p({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),B=()=>({church_id:K.activeBranch,name:"",type:"income",description:""}),r=p(B()),m=async(u=1)=>{y.value=!0;try{const a=await h.get("/cash-categories",{params:{page:u,per_page:s.value.per_page,search:w.value,church_id:K.activeBranch}});k.value=a.data.data,s.value={current_page:a.data.current_page,last_page:a.data.last_page,per_page:a.data.per_page,total:a.data.total,from:a.data.from,to:a.data.to}}catch(a){console.error("Fetch error:",a)}finally{y.value=!1}},I=()=>{clearTimeout(z.value),z.value=setTimeout(()=>m(1),500)},D=(u=null)=>{u?(v.value=u.id,r.value={...u}):(v.value=null,r.value=B()),C.value=!0},_=()=>{C.value=!1},A=async()=>{i.value=!0;try{v.value?await h.put(`/cash-categories/${v.value}`,r.value):await h.post("/cash-categories",r.value),f.fire({icon:"success",title:"Berhasil",timer:2e3,showConfirmButton:!1}),m(s.value.current_page),_()}catch{f.fire("Error","Gagal menyimpan data","error")}finally{i.value=!1}},N=async u=>{if((await f.fire({title:"Hapus Kategori Kas?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Ya, Hapus"})).isConfirmed)try{await h.delete(`/cash-categories/${u.id}`),m(),f.fire("Terhapus!","Kategori telah dihapus.","success")}catch{f.fire("Error","Gagal menghapus data","error")}};return L(()=>{m()}),(u,a)=>(n(),c("div",ae,[e("div",te,[a[12]||(a[12]=e("div",{class:"title-group"},[e("h1",{class:"page-title"},"Kategori Kas"),e("p",{class:"page-subtitle"},"Kelola klasifikasi pencatatan pemasukan dan pengeluaran")],-1)),e("div",se,[e("div",oe,[l(o(X),{size:"18",class:"search-icon"}),g(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),type:"text",placeholder:"Cari kategori...",class:"search-input",onInput:I},null,544),[[x,w.value]])]),e("button",{class:"btn btn-primary",onClick:a[1]||(a[1]=t=>D())},[l(o(P),{size:"18"}),a[10]||(a[10]=b()),a[11]||(a[11]=e("span",null,"Tambah Kategori",-1))])])]),e("div",le,[y.value?(n(),c("div",ne,[...a[13]||(a[13]=[e("div",{class:"spinner"},null,-1),e("p",null,"Memuat data kategori...",-1)])])):k.value.length===0?(n(),c("div",ie,[e("div",re,[l(o(V),{size:"48"})]),a[14]||(a[14]=e("p",null,"Tidak ada kategori ditemukan.",-1))])):(n(),c("div",de,[e("table",ue,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",{style:{width:"250px"}},"Identitas Kategori"),e("th",null,"Tipe Kas"),e("th",null,"Deskripsi"),e("th",{class:"text-right"},"Aksi")])],-1)),e("tbody",null,[(n(!0),c(T,null,H(k.value,t=>(n(),c("tr",{key:t.id,class:"row-hover"},[e("td",null,[e("div",pe,[e("span",ce,d(t.name),1),e("span",ve,"ID: #"+d(t.id),1)])]),e("td",null,[e("span",{class:Q(["status-pill",t.type==="income"?"active":"inactive"])},d(t.type==="income"?"Pemasukan":"Pengeluaran"),3)]),e("td",null,d(t.description||"-"),1),e("td",null,[e("div",me,[e("button",{class:"action-btn edit",onClick:q=>D(t),title:"Ubah"},[l(o($),{size:"16"})],8,ge),e("button",{class:"action-btn delete",onClick:q=>N(t),title:"Hapus"},[l(o(O),{size:"16"})],8,fe)])])]))),128))])]),e("div",_e,[e("div",be,[a[17]||(a[17]=e("span",{class:"text-xs font-bold text-muted"},"TAMPILKAN",-1)),g(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.per_page=t),onChange:a[3]||(a[3]=t=>m(1))},[...a[16]||(a[16]=[e("option",{value:10},"10 data",-1),e("option",{value:25},"25 data",-1),e("option",{value:50},"50 data",-1)])],544),[[U,s.value.per_page]])]),e("div",he,[e("span",ke,[e("b",null,d(s.value.from||0)+"-"+d(s.value.to||0),1),a[18]||(a[18]=b(" dari ",-1)),e("b",null,d(s.value.total),1)]),e("div",ye,[e("button",{class:"page-btn",disabled:s.value.current_page===1,onClick:a[4]||(a[4]=t=>m(s.value.current_page-1))},[l(o(Y),{size:"18"})],8,Ce),e("button",{class:"page-btn",disabled:s.value.current_page===s.value.last_page,onClick:a[5]||(a[5]=t=>m(s.value.current_page+1))},[l(o(J),{size:"18"})],8,we)])])])]))]),l(j,{name:"modal-fade"},{default:G(()=>[C.value?(n(),c("div",{key:0,class:"modal-overlay",onClick:a[9]||(a[9]=M(t=>!i.value&&_(),["self"]))},[e("div",xe,[e("div",Te,[e("div",Ke,[v.value?(n(),S(o($),{key:1,size:"24"})):(n(),S(o(P),{key:0,size:"24"}))]),e("div",ze,[e("h2",null,d(v.value?"Update Kategori":"Tambah Kategori Baru"),1),e("p",null,d(v.value?"Ubah informasi kategori yang sudah ada":"Lengkapi informasi kategori kas di bawah ini"),1)]),e("button",{class:"close-btn",onClick:_,disabled:i.value},[l(o(W),{size:"20"})],8,Be)]),e("form",{onSubmit:M(A,["prevent"]),class:"modal-body"},[e("div",De,[e("div",Ue,[a[19]||(a[19]=e("label",{class:"form-label"},[b("Nama Kategori "),e("span",{class:"required"},"*")],-1)),e("div",Me,[l(o(V),{size:"18",class:"input-icon"}),g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>r.value.name=t),type:"text",required:"",placeholder:"Contoh: Kolekte Umum",disabled:i.value},null,8,Se),[[x,r.value.name]])])]),e("div",Pe,[a[21]||(a[21]=e("label",{class:"form-label"},[b("Tipe Kas "),e("span",{class:"required"},"*")],-1)),e("div",Ve,[l(o(ee),{size:"18",class:"input-icon"}),g(e("select",{"onUpdate:modelValue":a[7]||(a[7]=t=>r.value.type=t),required:"",disabled:i.value},[...a[20]||(a[20]=[e("option",{value:"income"},"Pemasukan (Income)",-1),e("option",{value:"expense"},"Pengeluaran (Expense)",-1)])],8,$e),[[U,r.value.type]])])]),e("div",Ie,[a[22]||(a[22]=e("label",{class:"form-label"},"Deskripsi",-1)),e("div",Ae,[g(e("textarea",{"onUpdate:modelValue":a[8]||(a[8]=t=>r.value.description=t),rows:"3",placeholder:"Informasi tambahan mengenai kategori ini...",disabled:i.value},null,8,Ne),[[x,r.value.description]])])])]),e("div",qe,[e("button",{type:"button",class:"btn btn-ghost",onClick:_,disabled:i.value},"Batal",8,Ee),e("button",{type:"submit",class:"btn btn-primary",disabled:i.value},[i.value?(n(),c(T,{key:0},[a[23]||(a[23]=e("div",{class:"spinner small"},null,-1)),a[24]||(a[24]=e("span",null,"Menyimpan...",-1))],64)):(n(),c(T,{key:1},[l(o(Z),{size:"18"}),e("span",null,d(v.value?"Update Data":"Simpan Kategori"),1)],64))],8,Fe)])],32)])])):R("",!0)]),_:1})]))}},aa=E(Le,[["__scopeId","data-v-0058aabd"]]);export{aa as default};
