import{_ as N,r as h,z as L,f as $,c as n,o,m as w,a as e,b as k,x as _,s as S,t as b,q as B,k as i,p as q,F as C,n as z,e as F,u as O,d as p,h as D,w as T,v as P,g as K}from"./index-Mv3MxCR1.js";import{S as m}from"./sweetalert2.esm.all-BQxta0Da.js";import{L as Y,M as R}from"./lucide-vue-next-IJ70YE3l.js";import{C as X}from"./chevron-down-DSZpuO8w.js";import{X as I}from"./x-D8hPaNXE.js";import{B as M}from"./shield-check-DjBS79zd.js";import{K as G}from"./key-CQufVV6-.js";import{C as H}from"./circle-check-big-BN4MHkMS.js";import"./createLucideIcon-DBeZuCHW.js";import"./arrow-left-Cam99NkQ.js";import"./arrow-right-DJNCVpif.js";import"./arrow-up-down-Cbps0Qas.js";import"./award-QoisiMBi.js";import"./list-DqXgzvel.js";import"./bookmark-BwJlAJ1n.js";import"./briefcase-DeOdw5oH.js";import"./send-CpjUWACe.js";import"./ellipsis-DpzXmAzw.js";import"./calendar-range-BxVLNI6C.js";import"./calendar-COvuOzBD.js";import"./heart-CyMp0PKY.js";import"./chevron-left-C_DfDUMJ.js";import"./chevron-right-u8dkcCrv.js";import"./youtube-CivvLVGe.js";import"./circle-alert-BaaFyc9X.js";import"./circle-arrow-up-Birpf_H5.js";import"./clock-Cw4-8-Ua.js";import"./square-pen-SUGTGtSY.js";import"./credit-card-o0llABqc.js";import"./eye-BCGuvWcX.js";import"./file-plus-DZn6GRqB.js";import"./file-text-CPaFxqa6.js";import"./hash-3C7pK2I6.js";import"./history-w-TXIIRl.js";import"./info-DU3L2ZR8.js";import"./user-round-BAdrVHxF.js";import"./layers-ChaLHLIF.js";import"./shield-DrF0aZEA.js";import"./mail-jA6ul7Ep.js";import"./map-pin-DIz-n_0r.js";import"./map-h-cReqLO.js";import"./navigation-BWtfBrq5.js";import"./panels-top-left-B1iGkGEJ.js";import"./trash-2-CXOSxmzs.js";import"./upload-DJIZDbe-.js";import"./plus-BF4bXWAK.js";import"./refresh-ccw-CKToBt2C.js";import"./search-DW_529iS.js";import"./tag-Dx8Wwxbt.js";import"./type-zrf9LQ7g.js";import"./user-plus-Cdh2V3rs.js";import"./user-tPY_dJA_.js";import"./users-D_w7s7_7.js";import"./wallet-C2xPgWki.js";const J={class:"sidebar-item"},Q={key:0},W={class:"menu-label"},Z={class:"submenu"},ee={class:"menu-label"},te={__name:"SidebarItem",props:{item:{type:Object,required:!0}},setup(c){const s=c,v=h(!1),u=()=>{v.value=!v.value},f=L(()=>{if(!s.item.icon)return null;const y=s.item.icon.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join("");return Y[y]||null});return(y,a)=>{const l=$("SidebarItem",!0),g=$("router-link");return o(),n("div",J,[c.item.children&&c.item.children.length>0?(o(),n("div",Q,[e("div",{class:B(["menu-item has-children",{expanded:v.value}]),onClick:u},[f.value?(o(),w(S(f.value),{key:0,class:"menu-icon"})):_("",!0),e("span",W,b(c.item.name),1),(o(),w(S(i(X)),{class:B(["chevron-icon",{rotate:v.value}])},null,8,["class"]))],2),k(e("div",Z,[(o(!0),n(C,null,z(c.item.children,x=>(o(),w(l,{key:x.id,item:x},null,8,["item"]))),128))],512),[[q,v.value]])])):(o(),w(g,{key:1,to:c.item.url,class:"menu-item","active-class":"active"},{default:F(()=>[f.value?(o(),w(S(f.value),{key:0,class:"menu-icon"})):_("",!0),e("span",ee,b(c.item.name),1)]),_:1},8,["to"]))])}}},oe=N(te,[["__scopeId","data-v-05f3b27e"]]),se={class:"dashboard-layout"},re={class:"sidebar-header"},ie={key:0,class:"loading-state"},ne={key:1},ae={style:{"margin-top":"auto"}},le={key:0,style:{padding:"0.75rem 1rem","margin-bottom":"0.5rem",background:"#eef2ff","border-radius":"0.5rem",display:"flex","align-items":"center",gap:"0.5rem"}},de={style:{"font-size":"0.85rem","font-weight":"600",color:"var(--primary-color)"}},me={style:{padding:"1rem","border-top":"1px solid var(--border-color)","margin-bottom":"1rem"}},ce={style:{"font-size":"0.875rem","font-weight":"500"}},ue={style:{"font-size":"0.75rem",color:"var(--text-secondary)"}},pe={key:0,style:{position:"fixed",inset:"0",background:"rgba(0,0,0,0.8)","z-index":"100",display:"flex","align-items":"center","justify-content":"center","backdrop-filter":"blur(4px)"}},ve={class:"card",style:{width:"100%","max-width":"450px"}},be={style:{display:"flex","flex-direction":"column",gap:"0.75rem"}},fe=["onClick"],ye={style:{flex:"1","text-align":"left"}},we={key:1,style:{position:"fixed",inset:"0",background:"rgba(0,0,0,0.8)","z-index":"100",display:"flex","align-items":"center","justify-content":"center","backdrop-filter":"blur(4px)"}},ge={class:"card",style:{width:"100%","max-width":"450px"}},he={style:{padding:"1.5rem","border-bottom":"1px solid var(--border-color)"}},_e={style:{display:"flex","justify-content":"space-between","align-items":"center"}},xe={style:{"margin-bottom":"1rem"}},ke=["disabled"],Ce={style:{"margin-bottom":"1rem"}},ze=["disabled"],Be={style:{"margin-bottom":"1.5rem"}},Se=["disabled"],Pe={style:{display:"flex",gap:"0.75rem"}},Le=["disabled"],$e=["disabled"],Ie={class:"main-content"},Me={class:"mobile-header"},Ne={__name:"Layout",setup(c){const s=O(),v=K(),u=h(!1),f=()=>{u.value=!u.value},y=h(!1),a=h(!1),l=h({current_password:"",new_password:"",new_password_confirmation:""}),g=()=>{y.value=!1,l.value={current_password:"",new_password:"",new_password_confirmation:""}},x=async()=>{if(l.value.new_password!==l.value.new_password_confirmation){m.fire({icon:"error",title:"Error",text:"New password confirmation does not match"});return}a.value=!0;try{const d=await s.changePassword(l.value);if(d.success)g(),m.fire({icon:"success",title:"Success",text:"Password changed successfully"});else{let t=d.message;d.errors&&(t=Object.values(d.errors).flat().join(`
`)),m.fire({icon:"error",title:"Failed",text:t})}}catch{m.fire({icon:"error",title:"Error",text:"An unexpected error occurred"})}finally{a.value=!1}},j=L(()=>s.user&&s.user.branches&&s.user.branches.length>1&&!s.activeBranch),U=d=>{s.setActiveBranch(d)},V=L(()=>s.user?.menus||[]),A=async()=>{if((await m.fire({title:"Are you sure?",text:"You will be logged out of your session",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, logout!"})).isConfirmed){m.fire({title:"Logging out...",didOpen:()=>{m.showLoading()}});try{await s.logout(),m.close(),v.push("/login")}catch{m.fire({icon:"error",title:"Logout Failed",text:"Something went wrong"})}}};return(d,t)=>{const E=$("router-view");return o(),n("div",se,[e("div",{class:B(["sidebar-overlay",{show:u.value}]),onClick:t[0]||(t[0]=r=>u.value=!1)},null,2),e("aside",{class:B(["sidebar",{open:u.value}])},[e("div",re,[t[6]||(t[6]=e("div",{style:{display:"flex","align-items":"center",gap:"0.75rem"}},[e("span",{style:{"font-size":"1.5rem"}},"â›ª"),e("span",null,"E-Church")],-1)),e("button",{class:"mobile-close-btn",onClick:t[1]||(t[1]=r=>u.value=!1)},[p(i(I),{size:"24"})])]),e("nav",null,[i(s).isLoading?(o(),n("div",ie,[(o(),n(C,null,z(5,r=>e("div",{key:r,class:"skeleton-item"})),64))])):(o(),n("div",ne,[(o(!0),n(C,null,z(V.value,r=>(o(),w(oe,{key:r.id,item:r},null,8,["item"]))),128))]))]),e("div",ae,[i(s).activeBranch?(o(),n("div",le,[p(i(M),{size:16,class:"text-primary",style:{color:"var(--primary-color)"}}),e("div",null,[t[7]||(t[7]=e("p",{style:{"font-size":"0.7rem",color:"var(--text-secondary)","text-transform":"uppercase","font-weight":"600"}},"Active Branch",-1)),e("p",de,b(i(s).activeBranch.name),1)])])):_("",!0),e("div",me,[e("p",ce,b(i(s).user?.name),1),e("p",ue,b(i(s).user?.email),1)]),e("button",{onClick:t[2]||(t[2]=r=>y.value=!0),class:"btn btn-ghost",style:{width:"100%","margin-bottom":"0.5rem"}},[p(i(G),{size:"18"}),t[8]||(t[8]=D(" Change Password ",-1))]),e("button",{onClick:A,class:"btn btn-secondary",style:{width:"100%"}}," Logout ")])],2),j.value?(o(),n("div",pe,[e("div",ve,[t[9]||(t[9]=e("div",{style:{"text-align":"center","margin-bottom":"2rem"}},[e("h2",{style:{"font-size":"1.5rem","font-weight":"700","margin-bottom":"0.5rem"}},"Select Branch"),e("p",{style:{color:"var(--text-secondary)"}},"Please select a branch to continue")],-1)),e("div",be,[(o(!0),n(C,null,z(i(s).user?.branches,r=>(o(),n("button",{key:r.id,onClick:je=>U(r),class:"branch-select-btn"},[p(i(M),{size:20}),e("span",ye,b(r.name),1),p(i(H),{size:20,style:{opacity:"0"}})],8,fe))),128))])])])):_("",!0),y.value?(o(),n("div",we,[e("div",ge,[e("div",he,[e("div",_e,[t[10]||(t[10]=e("h2",{style:{"font-size":"1.25rem","font-weight":"700"}},"Change Password",-1)),e("button",{onClick:g,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem"}},[p(i(I),{size:20})])]),t[11]||(t[11]=e("p",{style:{color:"var(--text-secondary)","font-size":"0.875rem","margin-top":"0.25rem"}},"Update your account password",-1))]),e("form",{onSubmit:T(x,["prevent"]),style:{padding:"1.5rem"}},[e("div",xe,[t[12]||(t[12]=e("label",{style:{display:"block","font-size":"0.875rem","font-weight":"600","margin-bottom":"0.5rem"}},"Current Password",-1)),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.value.current_password=r),type:"password",required:"",placeholder:"Enter current password",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border-color)","border-radius":"0.5rem"},disabled:a.value},null,8,ke),[[P,l.value.current_password]])]),e("div",Ce,[t[13]||(t[13]=e("label",{style:{display:"block","font-size":"0.875rem","font-weight":"600","margin-bottom":"0.5rem"}},"New Password",-1)),k(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.value.new_password=r),type:"password",required:"",placeholder:"Enter new password",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border-color)","border-radius":"0.5rem"},disabled:a.value},null,8,ze),[[P,l.value.new_password]])]),e("div",Be,[t[14]||(t[14]=e("label",{style:{display:"block","font-size":"0.875rem","font-weight":"600","margin-bottom":"0.5rem"}},"Confirm New Password",-1)),k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l.value.new_password_confirmation=r),type:"password",required:"",placeholder:"Confirm new password",style:{width:"100%",padding:"0.625rem",border:"1px solid var(--border-color)","border-radius":"0.5rem"},disabled:a.value},null,8,Se),[[P,l.value.new_password_confirmation]])]),e("div",Pe,[e("button",{type:"button",onClick:g,class:"btn btn-ghost",style:{flex:"1"},disabled:a.value}," Cancel ",8,Le),e("button",{type:"submit",class:"btn btn-primary",style:{flex:"1"},disabled:a.value},b(a.value?"Updating...":"Update Password"),9,$e)])],32)])])):_("",!0),e("main",Ie,[e("header",Me,[e("button",{class:"menu-btn",onClick:f},[p(i(R),{size:"24"})])]),p(E)])])}}},Ut=N(Ne,[["__scopeId","data-v-137974ff"]]);export{Ut as default};
