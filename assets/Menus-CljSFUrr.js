import{_ as X,r as _,z as A,i as Y,c as r,a as e,d as a,b as f,k as n,v as h,h as J,F as v,n as z,e as K,T as W,j as L,o as l,m as b,x as T,t as p,s as D,w as F,l as Z}from"./index-Mv3MxCR1.js";import{C as O,L as ee,a as te}from"./lucide-vue-next-IJ70YE3l.js";import{S as y}from"./sweetalert2.esm.all-BQxta0Da.js";import{S as R}from"./search-DW_529iS.js";import{P as j}from"./plus-BF4bXWAK.js";import{C as se}from"./chevron-down-DSZpuO8w.js";import{P as S,T as E}from"./trash-2-CXOSxmzs.js";import{X as oe,C as le}from"./x-D8hPaNXE.js";import{T as ie}from"./type-zrf9LQ7g.js";import{L as ne}from"./youtube-CivvLVGe.js";import{L as ae}from"./layers-ChaLHLIF.js";import{H as re}from"./hash-3C7pK2I6.js";import"./createLucideIcon-DBeZuCHW.js";import"./arrow-left-Cam99NkQ.js";import"./arrow-right-DJNCVpif.js";import"./arrow-up-down-Cbps0Qas.js";import"./award-QoisiMBi.js";import"./list-DqXgzvel.js";import"./bookmark-BwJlAJ1n.js";import"./briefcase-DeOdw5oH.js";import"./shield-check-DjBS79zd.js";import"./send-CpjUWACe.js";import"./ellipsis-DpzXmAzw.js";import"./calendar-range-BxVLNI6C.js";import"./calendar-COvuOzBD.js";import"./heart-CyMp0PKY.js";import"./chevron-left-C_DfDUMJ.js";import"./chevron-right-u8dkcCrv.js";import"./circle-alert-BaaFyc9X.js";import"./circle-arrow-up-Birpf_H5.js";import"./circle-check-big-BN4MHkMS.js";import"./clock-Cw4-8-Ua.js";import"./square-pen-SUGTGtSY.js";import"./credit-card-o0llABqc.js";import"./eye-BCGuvWcX.js";import"./file-plus-DZn6GRqB.js";import"./file-text-CPaFxqa6.js";import"./history-w-TXIIRl.js";import"./info-DU3L2ZR8.js";import"./key-CQufVV6-.js";import"./user-round-BAdrVHxF.js";import"./shield-DrF0aZEA.js";import"./mail-jA6ul7Ep.js";import"./map-pin-DIz-n_0r.js";import"./map-h-cReqLO.js";import"./navigation-BWtfBrq5.js";import"./panels-top-left-B1iGkGEJ.js";import"./upload-DJIZDbe-.js";import"./refresh-ccw-CKToBt2C.js";import"./tag-Dx8Wwxbt.js";import"./user-plus-Cdh2V3rs.js";import"./user-tPY_dJA_.js";import"./users-D_w7s7_7.js";import"./wallet-C2xPgWki.js";const de={class:"menus-page"},ue={class:"header-section"},ce={class:"header-actions"},pe={class:"search-wrapper"},me=["disabled"],ve=["disabled"],_e={class:"card table-card"},be={key:0,class:"loading-state"},fe={key:1,class:"empty-state"},he={class:"empty-icon"},ye={key:2,class:"table-container"},ge={class:"modern-table"},Ce={class:"row-parent"},ke={class:"title-cell"},we={class:"flex items-center gap-3"},Me={class:"font-bold"},xe={class:"url-cell"},ze={class:"icon-badge"},Le={key:1,class:"text-xs text-muted"},Te={class:"order-badge"},De={class:"actions-group"},Se=["onClick","disabled"],Ue=["onClick","disabled"],$e={class:"row-child"},Ve={class:"title-cell pl-10"},Ne={class:"flex items-center gap-2"},Be={class:"font-semibold"},Ee={class:"url-cell"},Pe={class:"icon-badge small"},Ie={class:"order-badge small"},Ae={class:"actions-group"},Fe=["onClick","disabled"],Oe=["onClick","disabled"],Re={class:"title-cell pl-20"},je={class:"flex items-center gap-2"},qe={class:"text-slate-600"},He={class:"url-cell"},Qe={class:"icon-badge smaller"},Ge={class:"order-badge smaller"},Xe={class:"actions-group"},Ye=["onClick","disabled"],Je=["onClick","disabled"],Ke={class:"modal-content"},We={class:"modal-header"},Ze={class:"header-icon"},et={class:"header-text"},tt=["disabled"],st={class:"form-section"},ot={class:"form-group full-width"},lt={class:"input-wrapper"},it=["disabled"],nt={class:"form-grid"},at={class:"form-group"},rt={class:"input-wrapper"},dt=["disabled"],ut={class:"form-group"},ct={class:"input-wrapper"},pt=["disabled"],mt={class:"form-grid"},vt={class:"form-group"},_t={class:"input-wrapper"},bt=["disabled"],ft=["value"],ht={class:"form-group"},yt={class:"input-wrapper"},gt=["disabled"],Ct={class:"modal-footer"},kt=["disabled"],wt=["disabled"],Mt={__name:"Menus",setup(xt){const g=_([]),U=_(!0),i=_(!1),$=_(!1),m=_(null),C=_(""),d=_({title:"",url:"",icon:"",parent_id:null,order:0}),V=async()=>{U.value=!0;try{const o=await L.get("/menus-tree");g.value=o.data}catch(o){console.error("Failed to fetch menus",o)}finally{U.value=!1}},P=A(()=>{if(!C.value)return g.value;const o=C.value.toLowerCase();return g.value.reduce((t,s)=>{const u=s.title.toLowerCase().includes(o),c=s.children?.reduce((x,B)=>{const Q=B.title.toLowerCase().includes(o),I=B.children?.filter(G=>G.title.toLowerCase().includes(o))||[];return(Q||I.length>0)&&x.push({...B,children:I}),x},[])||[];return(u||c.length>0)&&t.push({...s,children:c}),t},[])}),q=A(()=>{const o=[];return g.value.forEach(t=>{o.push({id:t.id,title:t.title,level:1}),t.children?.forEach(s=>{o.push({id:s.id,title:`â€” ${s.title}`,level:2})})}),o});Y(V);const k=o=>{if(!o)return null;const t=o.split("-").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join("");return ee[t]||te},w=(o=null)=>{o?(m.value=o.id,d.value={title:o.title,url:o.url,icon:o.icon,parent_id:o.parent_id,order:o.order}):(m.value=null,d.value={title:"",url:"",icon:"",parent_id:null,order:0}),$.value=!0},M=()=>{$.value=!1},H=async()=>{i.value=!0;try{m.value?await L.put(`/menus/${m.value}`,d.value):await L.post("/menus",d.value),await V(),M(),y.fire({icon:"success",title:"Saved!",text:"Menu configuration has been updated.",timer:2e3,showConfirmButton:!1})}catch{y.fire("Error","Failed to save menu configuration.","error")}finally{i.value=!1}},N=async o=>{if((await y.fire({title:"Are you sure?",text:"All associated sub-menus will also be removed!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await L.delete(`/menus/${o}`),await V(),y.fire("Deleted!","The menu has been removed.","success")}catch{y.fire("Error","Failed to delete menu.","error")}};return(o,t)=>(l(),r("div",de,[e("div",ue,[t[10]||(t[10]=e("div",{class:"title-group"},[e("h1",{class:"page-title"},"Menu Management"),e("p",{class:"page-subtitle"},"Configure your application's navigation structure")],-1)),e("div",ce,[e("div",pe,[a(n(R),{size:"18",class:"search-icon"}),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),type:"text",placeholder:"Search menus...",class:"search-input",disabled:i.value},null,8,me),[[h,C.value]])]),e("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=s=>w()),disabled:i.value},[a(n(j),{size:"18"}),t[8]||(t[8]=J()),t[9]||(t[9]=e("span",null,"Add Menu",-1))],8,ve)])]),e("div",_e,[U.value?(l(),r("div",be,[...t[11]||(t[11]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading menus...",-1)])])):P.value.length===0?(l(),r("div",fe,[e("div",he,[a(n(R),{size:"48"})]),t[12]||(t[12]=e("p",null,"No menus found matching your search.",-1))])):(l(),r("div",ye,[e("table",ge,[t[14]||(t[14]=e("thead",null,[e("tr",null,[e("th",null,"Title"),e("th",null,"URL"),e("th",null,"Icon"),e("th",null,"Order"),e("th",{class:"text-right"},"Actions")])],-1)),e("tbody",null,[(l(!0),r(v,null,z(P.value,s=>(l(),r(v,{key:s.id},[e("tr",Ce,[e("td",ke,[e("div",we,[t[13]||(t[13]=e("div",{class:"status-indicator"},null,-1)),s.children?.length?(l(),b(n(se),{key:0,size:"16",class:"text-secondary"})):T("",!0),e("span",Me,p(s.title),1)])]),e("td",xe,[e("code",null,p(s.url),1)]),e("td",null,[e("div",ze,[s.icon?(l(),b(D(k(s.icon)),{key:0,size:"18"})):(l(),r("span",Le,"None"))])]),e("td",null,[e("span",Te,p(s.order),1)]),e("td",null,[e("div",De,[e("button",{class:"action-btn edit",onClick:u=>w(s),title:"Edit Menu",disabled:i.value},[a(n(S),{size:"16"})],8,Se),e("button",{class:"action-btn delete",onClick:u=>N(s.id),title:"Delete Menu",disabled:i.value},[a(n(E),{size:"16"})],8,Ue)])])]),(l(!0),r(v,null,z(s.children,u=>(l(),r(v,{key:u.id},[e("tr",$e,[e("td",Ve,[e("div",Ne,[a(n(O),{size:"14",class:"text-muted"}),e("span",Be,p(u.title),1)])]),e("td",Ee,[e("code",null,p(u.url),1)]),e("td",null,[e("div",Pe,[u.icon?(l(),b(D(k(u.icon)),{key:0,size:"16"})):T("",!0)])]),e("td",null,[e("span",Ie,p(u.order),1)]),e("td",null,[e("div",Ae,[e("button",{class:"action-btn edit",onClick:c=>w(u),title:"Edit Menu",disabled:i.value},[a(n(S),{size:"16"})],8,Fe),e("button",{class:"action-btn delete",onClick:c=>N(u.id),title:"Delete Menu",disabled:i.value},[a(n(E),{size:"16"})],8,Oe)])])]),(l(!0),r(v,null,z(u.children,c=>(l(),r("tr",{key:c.id,class:"row-grandchild"},[e("td",Re,[e("div",je,[a(n(O),{size:"12",class:"text-muted opacity-50"}),e("span",qe,p(c.title),1)])]),e("td",He,[e("code",null,p(c.url),1)]),e("td",null,[e("div",Qe,[c.icon?(l(),b(D(k(c.icon)),{key:0,size:"14"})):T("",!0)])]),e("td",null,[e("span",Ge,p(c.order),1)]),e("td",null,[e("div",Xe,[e("button",{class:"action-btn edit",onClick:x=>w(c),title:"Edit Menu",disabled:i.value},[a(n(S),{size:"16"})],8,Ye),e("button",{class:"action-btn delete",onClick:x=>N(c.id),title:"Delete Menu",disabled:i.value},[a(n(E),{size:"16"})],8,Je)])])]))),128))],64))),128))],64))),128))])])]))]),a(W,{name:"modal-fade"},{default:K(()=>[$.value?(l(),r("div",{key:0,class:"modal-overlay",onClick:t[7]||(t[7]=F(s=>!i.value&&M(),["self"]))},[e("div",Ke,[e("div",We,[e("div",Ze,[m.value?(l(),b(n(S),{key:1,size:"24"})):(l(),b(n(j),{key:0,size:"24"}))]),e("div",et,[e("h2",null,p(m.value?"Update Menu":"Create New Menu"),1),e("p",null,p(m.value?"Modify existing menu configuration":"Add a new item to your navigation"),1)]),e("button",{class:"close-btn",onClick:M,disabled:i.value},[a(n(oe),{size:"20"})],8,tt)]),e("form",{onSubmit:F(H,["prevent"]),class:"modal-body"},[e("div",st,[e("div",ot,[t[15]||(t[15]=e("label",{class:"form-label"},"Menu Title",-1)),e("div",lt,[a(n(ie),{size:"18",class:"input-icon"}),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value.title=s),type:"text",required:"",placeholder:"Display name",disabled:i.value},null,8,it),[[h,d.value.title]])])]),e("div",nt,[e("div",at,[t[16]||(t[16]=e("label",{class:"form-label"},"URL Path",-1)),e("div",rt,[a(n(ne),{size:"18",class:"input-icon"}),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>d.value.url=s),type:"text",placeholder:"/dashboard",disabled:i.value},null,8,dt),[[h,d.value.url]])])]),e("div",ut,[t[17]||(t[17]=e("label",{class:"form-label"},"Icon Name",-1)),e("div",ct,[(l(),b(D(k(d.value.icon)||"Circle"),{size:"18",class:"input-icon"})),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.icon=s),type:"text",placeholder:"home, users, etc.",disabled:i.value},null,8,pt),[[h,d.value.icon]])])])]),e("div",mt,[e("div",vt,[t[19]||(t[19]=e("label",{class:"form-label"},"Parent Category",-1)),e("div",_t,[a(n(ae),{size:"18",class:"input-icon"}),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>d.value.parent_id=s),disabled:i.value},[t[18]||(t[18]=e("option",{value:null},"Top Level Menu",-1)),(l(!0),r(v,null,z(q.value,s=>(l(),r("option",{key:s.id,value:s.id},p(s.title),9,ft))),128))],8,bt),[[Z,d.value.parent_id]])])]),e("div",ht,[t[20]||(t[20]=e("label",{class:"form-label"},"Sort Order",-1)),e("div",yt,[a(n(re),{size:"18",class:"input-icon"}),f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>d.value.order=s),type:"number",disabled:i.value},null,8,gt),[[h,d.value.order,void 0,{number:!0}]])])])])]),e("div",Ct,[e("button",{type:"button",class:"btn btn-ghost",onClick:M,disabled:i.value},"Discard",8,kt),e("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:i.value},[i.value?(l(),r(v,{key:0},[t[21]||(t[21]=e("div",{class:"spinner small"},null,-1)),t[22]||(t[22]=e("span",null,"Saving...",-1))],64)):(l(),r(v,{key:1},[a(n(le),{size:"18"}),e("span",null,p(m.value?"Update Menu":"Confirm & Save"),1)],64))],8,wt)])],32)])])):T("",!0)]),_:1})]))}},zs=X(Mt,[["__scopeId","data-v-db75c32f"]]);export{zs as default};
