import{_ as z,u as I,r as m,z as K,i as U,c as l,a as t,d as i,h as V,q as f,k as d,b as v,v as x,l as y,F as b,n as w,t as g,j as k,o as n}from"./index-Mv3MxCR1.js";import{R as A}from"./refresh-ccw-CKToBt2C.js";import{C}from"./calendar-COvuOzBD.js";import{A as N}from"./arrow-up-down-Cbps0Qas.js";import{M as B}from"./map-pin-DIz-n_0r.js";import{F as L}from"./file-text-CPaFxqa6.js";import"./createLucideIcon-DBeZuCHW.js";const E={class:"master-data-page wide"},O={class:"header-section"},P={class:"header-actions"},Y={class:"card filter-card report-section-gap"},j={class:"p-6"},q={class:"flex flex-wrap items-end gap-6"},H={class:"filter-item flex-1 min-w-[300px]"},J={class:"flex items-center gap-2"},G={class:"input-wrapper-report flex-1"},Q={class:"input-wrapper-report flex-1"},W={class:"p-6"},X={class:"filter-item min-w-[200px]"},Z={class:"input-wrapper-report"},$={class:"filter-item min-w-[200px]"},tt={class:"input-wrapper-report"},et=["value"],st={class:"card table-card shadow-sm border-slate-200"},at={key:0,class:"loading-state h-64"},ot={key:1,class:"empty-state h-64"},lt={class:"empty-icon"},nt={key:2,class:"table-container shadow-none"},rt={class:"modern-table border-none"},it={class:"font-bold text-slate-700"},dt={class:"bg-slate-50/30"},pt={__name:"CategoryCashReport",setup(ut){const D=I(),p=m(!0),u=m([]),c=new Date,F=new Date(c.getFullYear(),c.getMonth(),1).toISOString().split("T")[0],M=new Date(c.getFullYear(),c.getMonth()+1,0).toISOString().split("T")[0],o=m({start_date:F,end_date:M,type:"expense",church_id:D.activeBranch}),h=m([]),S=K(()=>u.value.reduce((a,e)=>a+parseFloat(e.total_nominal||0),0)),T=async()=>{try{const a=await k.get("/branches",{params:{per_page:999}});h.value=a.data.data}catch(a){console.error("Failed to fetch filter options",a)}},r=async()=>{p.value=!0;try{const a=await k.get("/reports/cash-category",{params:o.value});u.value=a.data.data}catch(a){console.error("Failed to fetch report",a)}finally{p.value=!1}},_=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a);return U(()=>{T(),r()}),(a,e)=>(n(),l("div",E,[t("div",O,[e[6]||(e[6]=t("div",{class:"title-group"},[t("h1",{class:"page-title"},"Laporan Kas per Kategori"),t("p",{class:"page-subtitle"},"Analisis alokasi penggunaan dana berdasarkan kategori transaksi")],-1)),t("div",P,[t("button",{class:"btn btn-primary",onClick:r},[i(d(A),{size:"18",class:f({"animate-spin":p.value})},null,8,["class"]),e[4]||(e[4]=V()),e[5]||(e[5]=t("span",null,"Refresh Laporan",-1))])])]),t("div",Y,[t("div",j,[t("div",q,[t("div",H,[e[8]||(e[8]=t("span",{class:"filter-label"},"Periode Tanggal",-1)),t("div",J,[t("div",G,[i(d(C),{size:"16",class:"input-icon"}),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.start_date=s),type:"date",onChange:r,class:"report-input"},null,544),[[x,o.value.start_date]])]),e[7]||(e[7]=t("span",{class:"text-slate-400 font-bold"},"s/d",-1)),t("div",Q,[i(d(C),{size:"16",class:"input-icon"}),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.end_date=s),type:"date",onChange:r,class:"report-input"},null,544),[[x,o.value.end_date]])])])])])]),t("div",W,[t("div",X,[e[10]||(e[10]=t("span",{class:"filter-label"},"Jenis Kas",-1)),t("div",Z,[i(d(N),{size:"16",class:"input-icon"}),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.type=s),onChange:r,class:"report-select"},[...e[9]||(e[9]=[t("option",{value:"income"},"Masuk (Income)",-1),t("option",{value:"expense"},"Keluar (Expense)",-1)])],544),[[y,o.value.type]])])]),t("div",$,[e[12]||(e[12]=t("span",{class:"filter-label"},"Cabang / Branch",-1)),t("div",tt,[i(d(B),{size:"16",class:"input-icon"}),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.church_id=s),onChange:r,class:"report-select"},[e[11]||(e[11]=t("option",{value:null},"Semua Cabang",-1)),(n(!0),l(b,null,w(h.value,s=>(n(),l("option",{key:s.id,value:s.id},g(s.name),9,et))),128))],544),[[y,o.value.church_id]])])])])]),t("div",st,[p.value?(n(),l("div",at,[...e[13]||(e[13]=[t("div",{class:"spinner"},null,-1),t("p",null,"Menghasilkan laporan...",-1)])])):u.value.length===0?(n(),l("div",ot,[t("div",lt,[i(d(L),{size:"48"})]),e[14]||(e[14]=t("p",null,"Tidak ada data ditemukan untuk kriteria ini.",-1))])):(n(),l("div",nt,[t("table",rt,[e[16]||(e[16]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",null,"Kategori Kas"),t("th",{class:"text-right",style:{width:"250px"}},"Total Nominal")])],-1)),t("tbody",null,[(n(!0),l(b,null,w(u.value,(s,R)=>(n(),l("tr",{key:R,class:"row-hover border-b border-slate-100 last:border-0"},[t("td",it,g(s.category_name),1),t("td",{class:f(["text-right font-black",o.value.type==="income"?"text-emerald-600":"text-rose-600"])},g(_(s.total_nominal)),3)]))),128))]),t("tfoot",dt,[t("tr",null,[e[15]||(e[15]=t("td",{class:"font-black text-slate-500 uppercase text-[10px] py-6"},"TOTAL KESELURUHAN",-1)),t("td",{class:f(["text-right font-black text-xl",o.value.type==="income"?"text-emerald-600":"text-rose-600"])},g(_(S.value)),3)])])])]))])]))}},xt=z(pt,[["__scopeId","data-v-a78f69db"]]);export{xt as default};
